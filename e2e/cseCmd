echo $(date),$(hostname) > /var/log/azure/cluster-provision-cse-output.log; retrycmd_if_failure() { r=$1; w=$2; t=$3; shift && shift && shift; for i in $(seq 1 $r); do timeout $t ${@}; [ $? -eq 0  ] && break || if [ $i -eq $r ]; then return 1; else sleep $w; fi; done }; ERR_OUTBOUND_CONN_FAIL=50; retrycmd_if_failure 100 1 10 curl -v --insecure --proxy-insecure https://mcr.microsoft.com/v2/ >> /var/log/azure/cluster-provision-cse-output.log 2>&1 || time curl -v --insecure --proxy-insecure https://mcr.microsoft.com/v2/ || exit $ERR_OUTBOUND_CONN_FAIL; for i in $(seq 1 1200); do grep -Fq "EOF" /opt/azure/containers/provision.sh && break; if [ $i -eq 1200 ]; then exit 100; else sleep 1; fi; done;  ADMINUSER=azureuser MOBY_VERSION= TENANT_ID=72f988bf-86f1-41af-91ab-2d7cd011db47 KUBERNETES_VERSION=1.19.9 HYPERKUBE_URL=mcr.microsoft.com/oss/kubernetes/ KUBE_BINARY_URL=https://acs-mirror.azureedge.net/kubernetes/v1.19.9-hotfix.20210322/binaries/kubernetes-node-linux-amd64.tar.gz KUBEPROXY_URL=mcr.microsoft.com/oss/kubernetes/kube-proxy:v1.19.9-hotfix.20210322.1 APISERVER_PUBLIC_KEY=LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUdFVENDQS9tZ0F3SUJBZ0lSQUl3aU0ycWdSUUFhMDNtckFrYUlzTGd3RFFZSktvWklodmNOQVFFTEJRQXcKRFRFTE1Ba0dBMVVFQXhNQ1kyRXdIaGNOTWpJd01qQTRNRFkwT0RVM1doY05NalF3TWpBNE1EWTFPRFUzV2pBVQpNUkl3RUFZRFZRUURFd2xoY0dselpYSjJaWEl3Z2dJaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQ0R3QXdnZ0lLCkFvSUNBUUN2MjhjU1EzUTkxR21KeGEzSi9UakFhOHpIZ1ZHU0xqU3R6ZWlPdkIyQ0RDZlVVRDRwbTlFRml2TTAKdFc3cVhhM0xEOUk2b0hzdFdzSzFOQ0c4SXZud2dnKy9RTWVvSzhLOWN6VnBGbmUzeFdET2syaWxueVpubElEZQo2eWYwbTAxM3gwb2tnamsvck8yV0VJZlhiajladnJ4cUhMUnNYUXpaYU00S1Q0eTlvclNnMFF5dGxlOXYzWjVPCkJwV0M0QlZtR3o1QmhRbW41UnhTbHNCRlhObFBRbmxGK05IMlhyTVNkV3FmclNWZzdSYTM1Tk5lWWhNZWliUTAKZmZKbFc3clYxQ0hvMmFWZkljMjNtVk90SUlrem8xak4zYngvZ3lHNldVZWNQTEJSZGUrRjY3K2ZJaGdlTVpBNQoyYWZEcFVxcmU2aEhOZmNObUhiL1graUVtS3VMODZpYjdSYmd1NEZiUVh5WkFzNitFRXhHWHBoTlFsaGpxQVJpClRCZEJ6Q21CSzJDTWpJOHY3T0RGaVBpOGpJc0hrblRJKzYva2JJUEU4T01USVFwQXVIYjFUNklrVWRXUHNhSm0KNTEwbGwzeFZlVUV2UVVvVmJTdkxkb3I2ZXVGdXEyZ3ZBcmJ1SG9kNG5jVFlCcFV6bkUzMTVDd0VLYVNjMWZoTApOeEo0MkRpb284NXRrbURQMjVNTlIrTGdQd1REaEo5VFIvcFZXVm1DeHZpZ0J1V1pOY1lWaUgrU0R2MDBuYS91CkM2c0xhbnMyUzlMK0twODgvenpMQ3RIZFRJMUlBREJUN0kyYUJBZ3JVbSs4b3dtTkFxU1VYOERrSDBJc1hCcnIKVGRHZHJpMEUyQytyQzZ3OGVKMzhuRncvNDZreTJlWk1vdW9BTlJKMEtjTElrWFlraHdJREFRQUJvNElCWXpDQwpBVjh3RGdZRFZSMFBBUUgvQkFRREFnV2dNQk1HQTFVZEpRUU1NQW9HQ0NzR0FRVUZCd01CTUF3R0ExVWRFd0VCCi93UUNNQUF3SHdZRFZSMGpCQmd3Rm9BVWpISkZndFQ4bkdKWUZZbHQwNk9EL2t1ZFQvUXdnZ0VIQmdOVkhSRUUKZ2Y4d2dmeUNDV3h2WTJGc2FHOXpkSUlPYUdOd0xXdDFZbVZ5Ym1WMFpYT0NDbXQxWW1WeWJtVjBaWE9DRW10MQpZbVZ5Ym1WMFpYTXVaR1ZtWVhWc2RJSVdhM1ZpWlhKdVpYUmxjeTVrWldaaGRXeDBMbk4yWTRJa2EzVmlaWEp1ClpYUmxjeTVrWldaaGRXeDBMbk4yWXk1amJIVnpkR1Z5TG14dlkyRnNnamxvWTNBdGEzVmlaWEp1WlhSbGN5NDIKTWpBeU1UUmhOR0UwTldabU56QXdNREV4TmpKalpURXVjM1pqTG1Oc2RYTjBaWEl1Ykc5allXeUNRR0ZuWlc1MApZbUZyWlhJdFlXZGxiblJpWVd0bGNpMWxNbVV0ZEMwNFpXTmhaR1l0T1dJek9HUTBOMkV1YUdOd0xtVmhjM1IxCmN5NWhlbTFyT0hNdWFXK0hCQW9BQUFFd0RRWUpLb1pJaHZjTkFRRUxCUUFEZ2dJQkFMMWFQQUpNR29Vd05ndmUKYmRZUUxGY0VuUlJIQmdVTnhYL0pHMlczNUIxbXFUa2d0VlcxOGd1cnJmK2RsMy9CRFB5cWR0YUNmVGJac3lxTQpVUmFYS2cvQy9oeFlhbmowWUFDUVFlTzNXelBzaTlsNkEzOUNjZGNYcHR6OVRtQStCb0Rpc0h1Tk95UUJKOVdZCkhQVVZHMmtBMWVQL0Fab1I1QllpUm4rL3k2K0lWRzNLOU9yT0xqTmZwcWlZVDBoa3ZJWC9hV1l1Wmt5QTR6TVUKVXhKQWhwQnNrd1hwbjFBRVVNZTR3djZURk9xZFJCbzJsNjhVK0gxUHZlM08wZ0VHWGQ3bWtGcHlrbzNWQnltZgpyczh0cUZkUWpYZVVuaU9MRFIzUkp1dVhvQTFKZHRFbmdNTGZUZ0xQRkhtL3NvbHBHWEpYTWFzNkVtcCtXNjZ1Ck9Nd2NMd1NTdldIUnZGV1ZaQ3pYSkxSTHdUVnNVRWJDU1l0NVRpNWdxZW1GOEZaWGIwQU5WNGhMMFFrVThuWTgKWFRTaWl4YVdObEd3N2psL2k5aW16Rk95dVhxQlp2T25oWjU3dUdTbEFHM0o2Ry9VTGp5cmppMmhnbmgvamZvMgpTaUNzOHVxZk9EVDRma1pmQjNNRDg3cFNObFV1eHE3UllOQWNXa1dFSlpzZzRJRUhlT0NiaGY5NTlXUEhMcjlvCkxMUDNkVWhtaW15MGxYRjF0Tm5NaVF3enB0VnlLWDR4aHdyaWFPYzdkb0ZSSHR2NktkM21MY2NoL0Fra25nOGYKeFpsSENNNDQ4M01jdXFLckU0aTVGcDl2V0hiK1FUNG9tOTZiTkJGbjBWM2M5V2VyQzFtdlFSaE5jL1A2TWRJNwpjOEYxME4wVm5sMVhTZERqTjhGaFh4eWRZb0UyCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K SUBSCRIPTION_ID=8ecadfc9-d1a3-4ea4-b844-0d9f87e4d7c8 RESOURCE_GROUP=MC_agentbaker-e2e-tests_agentbaker-e2e-test-cluster_eastus LOCATION=eastus VM_TYPE=vmss SUBNET=aks-subnet NETWORK_SECURITY_GROUP=aks-agentpool-34464070-nsg VIRTUAL_NETWORK=aks-vnet-34464070 VIRTUAL_NETWORK_RESOURCE_GROUP= ROUTE_TABLE=aks-agentpool-34464070-routetable PRIMARY_AVAILABILITY_SET= PRIMARY_SCALE_SET= SERVICE_PRINCIPAL_CLIENT_ID=msi NETWORK_PLUGIN=kubenet NETWORK_POLICY= VNET_CNI_PLUGINS_URL=https://acs-mirror.azureedge.net/azure-cni/v1.1.8/binaries/azure-vnet-cni-linux-amd64-v1.1.8.tgz CNI_PLUGINS_URL=https://acs-mirror.azureedge.net/cni/cni-plugins-amd64-v0.7.6.tgz CLOUDPROVIDER_BACKOFF=true CLOUDPROVIDER_BACKOFF_MODE=v2 CLOUDPROVIDER_BACKOFF_RETRIES=6 CLOUDPROVIDER_BACKOFF_EXPONENT=0 CLOUDPROVIDER_BACKOFF_DURATION=5 CLOUDPROVIDER_BACKOFF_JITTER=0 CLOUDPROVIDER_RATELIMIT=true CLOUDPROVIDER_RATELIMIT_QPS=10 CLOUDPROVIDER_RATELIMIT_QPS_WRITE=10 CLOUDPROVIDER_RATELIMIT_BUCKET=100 CLOUDPROVIDER_RATELIMIT_BUCKET_WRITE=100 LOAD_BALANCER_DISABLE_OUTBOUND_SNAT=false USE_MANAGED_IDENTITY_EXTENSION=false USE_INSTANCE_METADATA=true LOAD_BALANCER_SKU=Standard EXCLUDE_MASTER_FROM_STANDARD_LB=true MAXIMUM_LOADBALANCER_RULE_COUNT=250 CONTAINER_RUNTIME=containerd CLI_TOOL=ctr CONTAINERD_DOWNLOAD_URL_BASE=https://storage.googleapis.com/cri-containerd-release/ NETWORK_MODE= KUBE_BINARY_URL=https://acs-mirror.azureedge.net/kubernetes/v1.19.9-hotfix.20210322/binaries/kubernetes-node-linux-amd64.tar.gz USER_ASSIGNED_IDENTITY_ID=1a2d3d2b-7365-40b6-8efd-77018804e4b7 API_SERVER_NAME=agentbaker-agentbaker-e2e-t-8ecadf-9b38d47a.hcp.eastus.azmk8s.io IS_VHD=true GPU_NODE=false SGX_NODE=false MIG_NODE=false CONFIG_GPU_DRIVER_IF_NEEDED=true ENABLE_GPU_DEVICE_PLUGIN_IF_NEEDED=false TELEPORTD_PLUGIN_DOWNLOAD_URL= CONTAINERD_VERSION= CONTAINERD_PACKAGE_URL= RUNC_VERSION= RUNC_PACKAGE_URL= /usr/bin/nohup /bin/bash -c "/bin/bash /opt/azure/containers/provision_start.sh"