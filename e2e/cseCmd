echo $(date),$(hostname) > /var/log/azure/cluster-provision-cse-output.log; retrycmd_if_failure() { r=$1; w=$2; t=$3; shift && shift && shift; for i in $(seq 1 $r); do timeout $t ${@}; [ $? -eq 0  ] && break || if [ $i -eq $r ]; then return 1; else sleep $w; fi; done }; ERR_OUTBOUND_CONN_FAIL=50; retrycmd_if_failure 100 1 10 curl -v --insecure --proxy-insecure https://mcr.microsoft.com/v2/ >> /var/log/azure/cluster-provision-cse-output.log 2>&1 || time curl -v --insecure --proxy-insecure https://mcr.microsoft.com/v2/ || exit $ERR_OUTBOUND_CONN_FAIL; for i in $(seq 1 1200); do grep -Fq "EOF" /opt/azure/containers/provision.sh && break; if [ $i -eq 1200 ]; then exit 100; else sleep 1; fi; done;  ADMINUSER=azureuser MOBY_VERSION= TENANT_ID=72f988bf-86f1-41af-91ab-2d7cd011db47 KUBERNETES_VERSION=1.19.9 HYPERKUBE_URL=mcr.microsoft.com/oss/kubernetes/ KUBE_BINARY_URL=https://acs-mirror.azureedge.net/kubernetes/v1.19.9-hotfix.20210322/binaries/kubernetes-node-linux-amd64.tar.gz KUBEPROXY_URL=mcr.microsoft.com/oss/kubernetes/kube-proxy:v1.19.9-hotfix.20210322.1 APISERVER_PUBLIC_KEY=TFMwdExTMUNSVWRKVGlCRFJWSlVTVVpKUTBGVVJTMHRMUzB0Q2sxSlNVZEZWRU5EUVM5dFowRjNTVUpCWjBsU1FVbDNhVTB5Y1dkU1VVRmhNRE50Y2tGcllVbHpUR2QzUkZGWlNrdHZXa2xvZG1OT1FWRkZURUpSUVhjS1JGUkZURTFCYTBkQk1WVkZRWGhOUTFreVJYZElhR05PVFdwSmQwMXFRVFJOUkZrd1QwUlZNMWRvWTA1TmFsRjNUV3BCTkUxRVdURlBSRlV6VjJwQlZRcE5Va2wzUlVGWlJGWlJVVVJGZDJ4b1kwZHNlbHBZU2pKYVdFbDNaMmRKYVUxQk1FZERVM0ZIVTBsaU0wUlJSVUpCVVZWQlFUUkpRMFIzUVhkblowbExDa0Z2U1VOQlVVTjJNamhqVTFFelVUa3hSMjFLZUdFelNpOVVha0ZoT0hwSVoxWkhVMHhxVTNSNlpXbFBka0l5UTBSRFpsVlZSRFJ3YlRsRlJtbDJUVEFLZEZjM2NWaGhNMHhFT1VrMmIwaHpkRmR6U3pGT1EwYzRTWFp1ZDJkbkt5OVJUV1Z2U3poTE9XTjZWbkJHYm1VemVGZEVUMnN5YVd4dWVWcHViRWxFWlFvMmVXWXdiVEF4TTNnd2IydG5hbXN2Y2s4eVYwVkpabGhpYWpsYWRuSjRjVWhNVW5OWVVYcGFZVTAwUzFRMGVUbHZjbE5uTUZGNWRHeGxPWFl6V2pWUENrSndWME0wUWxadFIzbzFRbWhSYlc0MVVuaFRiSE5DUmxoT2JGQlJibXhHSzA1SU1saHlUVk5rVjNGbWNsTldaemRTWVRNMVRrNWxXV2hOWldsaVVUQUtabVpLYkZjM2NsWXhRMGh2TW1GV1prbGpNak50Vms5MFNVbHJlbTh4YWs0elluZ3ZaM2xITmxkVlpXTlFURUpTWkdVclJqWTNLMlpKYUdkbFRWcEJOUW95WVdaRWNGVnhjbVUyYUVoT1ptTk9iVWhpTDFncmFVVnRTM1ZNT0RacFlqZFNZbWQxTkVaaVVWaDVXa0Z6Tml0RlJYaEhXSEJvVGxGc2FHcHhRVkpwQ2xSQ1pFSjZRMjFDU3pKRFRXcEpPSFkzVDBSR2FWQnBPR3BKYzBocmJsUkpLell2YTJKSlVFVTRUMDFVU1ZGd1FYVklZakZVTmtsclZXUlhVSE5oU20wS05URXdiR3d6ZUZabFZVVjJVVlZ2Vm1KVGRreGtiM0kyWlhWR2RYRXlaM1pCY21KMVNHOWtORzVqVkZsQ2NGVjZia1V6TVRWRGQwVkxZVk5qTVdab1RBcE9lRW8wTWtScGIyODROWFJyYlVSUU1qVk5UbElyVEdkUWQxUkVhRW81VkZJdmNGWlhWbTFEZUhacFowSjFWMXBPWTFsV2FVZ3JVMFIyTURCdVlTOTFDa00yYzB4aGJuTXlVemxNSzB0d09EZ3ZlbnBNUTNSSVpGUkpNVWxCUkVKVU4wa3lZVUpCWjNKVmJTczRiM2R0VGtGeFUxVllPRVJyU0RCSmMxaENjbklLVkdSSFpISnBNRVV5UXl0eVF6WjNPR1ZLTXpodVJuY3ZORFpyZVRKbFdrMXZkVzlCVGxKS01FdGpURWxyV0ZscmFIZEpSRUZSUVVKdk5FbENXWHBEUXdwQlZqaDNSR2RaUkZaU01GQkJVVWd2UWtGUlJFRm5WMmROUWsxSFFURlZaRXBSVVUxTlFXOUhRME56UjBGUlZVWkNkMDFDVFVGM1IwRXhWV1JGZDBWQ0NpOTNVVU5OUVVGM1NIZFpSRlpTTUdwQ1FtZDNSbTlCVldwSVNrWm5kRlE0YmtkS1dVWlpiSFF3Tms5RUwydDFaRlF2VVhkblowVklRbWRPVmtoU1JVVUtaMlk0ZDJkbWVVTkRWM2gyV1RKR2MyRkhPWHBrU1VsUFlVZE9kMHhYZERGWmJWWjVZbTFXTUZwWVQwTkRiWFF4V1cxV2VXSnRWakJhV0U5RFJXMTBNUXBaYlZaNVltMVdNRnBZVFhWYVIxWnRXVmhXYzJSSlNWZGhNMVpwV2xoS2RWcFlVbXhqZVRWcldsZGFhR1JYZURCTWJrNHlXVFJKYTJFelZtbGFXRXAxQ2xwWVVteGplVFZyV2xkYWFHUlhlREJNYms0eVdYazFhbUpJVm5wa1IxWjVURzE0ZGxreVJuTm5hbXh2V1ROQmRHRXpWbWxhV0VwMVdsaFNiR041TkRJS1RXcEJlVTFVVW1oT1IwVXdUbGRhYlU1NlFYZE5SRVY0VG1wS2FscFVSWFZqTTFwcVRHMU9jMlJZVGpCYVdFbDFZa2M1YWxsWGVVTlJSMFp1V2xjMU1BcFpiVVp5V2xoSmRGbFhaR3hpYmxKcFdWZDBiR05wTVd4TmJWVjBaRU13TkZwWFRtaGFSMWwwVDFkSmVrOUhVVEJPTWtWMVlVZE9kMHh0Vm1oak0xSXhDbU41TldobGJURnlUMGhOZFdGWEswaENRVzlCUVVGRmQwUlJXVXBMYjFwSmFIWmpUa0ZSUlV4Q1VVRkVaMmRKUWtGTU1XRlFRVXBOUjI5VmQwNW5kbVVLWW1SWlVVeEdZMFZ1VWxKSVFtZFZUbmhZTDBwSE1sY3pOVUl4YlhGVWEyZDBWbGN4T0dkMWNuSm1LMlJzTXk5Q1JGQjVjV1IwWVVObVZHSmFjM2x4VFFwVlVtRllTMmN2UXk5b2VGbGhibW93V1VGRFVWRmxUek5YZWxCemFUbHNOa0V6T1VOalpHTlljSFI2T1ZSdFFTdENiMFJwYzBoMVRrOTVVVUpLT1ZkWkNraFFWVlpITW10Qk1XVlFMMEZhYjFJMVFsbHBVbTRyTDNrMkswbFdSek5MT1U5eVQweHFUbVp3Y1dsWlZEQm9hM1pKV0M5aFYxbDFXbXQ1UVRSNlRWVUtWWGhLUVdod1FuTnJkMWh3YmpGQlJWVk5aVFIzZGpaVVJrOXhaRkpDYnpKc05qaFZLMGd4VUhabE0wOHdaMFZIV0dRM2JXdEdjSGxyYnpOV1FubHRaZ3B5Y3poMGNVWmtVV3BZWlZWdWFVOU1SRkl6VWtwMWRWaHZRVEZLWkhSRmJtZE5UR1pVWjB4UVJraHRMM052YkhCSFdFcFlUV0Z6TmtWdGNDdFhOaloxQ2s5TmQyTk1kMU5UZGxkSVVuWkdWMVphUTNwWVNreFNUSGRVVm5OVlJXSkRVMWwwTlZScE5XZHhaVzFHT0VaYVdHSXdRVTVXTkdoTU1GRnJWVGh1V1RnS1dGUlRhV2w0WVZkT2JFZDNOMnBzTDJrNWFXMTZSazk1ZFZoeFFscDJUMjVvV2pVM2RVZFRiRUZITTBvMlJ5OVZUR3A1Y21wcE1taG5ibWd2YW1adk1ncFRhVU56T0hWeFprOUVWRFJtYTFwbVFqTk5SRGczY0ZOT2JGVjFlSEUzVWxsT1FXTlhhMWRGU2xwelp6UkpSVWhsVDBOaWFHWTVOVGxYVUVoTWNqbHZDa3hNVUROa1ZXaHRhVzE1TUd4WVJqRjBUbTVOYVZGM2VuQjBWbmxMV0RSNGFIZHlhV0ZQWXpka2IwWlNTSFIyTmt0a00yMU1ZMk5vTDBGcmEyNW5PR1lLZUZwc1NFTk5ORFE0TTAxamRYRkxja1UwYVRWR2NEbDJWMGhpSzFGVU5HOXRPVFppVGtKR2JqQldNMk01VjJWeVF6RnRkbEZTYUU1akwxQTJUV1JKTndwak9FWXhNRTR3Vm01c01WaFRaRVJxVGpoR2FGaDRlV1JaYjBVeUNpMHRMUzB0UlU1RUlFTkZVbFJKUmtsRFFWUkZMUzB0TFMwSw== SUBSCRIPTION_ID=8ecadfc9-d1a3-4ea4-b844-0d9f87e4d7c8 RESOURCE_GROUP=MC_agentbaker-e2e-tests_agentbaker-e2e-test-cluster_eastus LOCATION=eastus VM_TYPE=vmss SUBNET=aks-subnet NETWORK_SECURITY_GROUP=aks-agentpool-34464070-nsg VIRTUAL_NETWORK=aks-vnet-34464070 VIRTUAL_NETWORK_RESOURCE_GROUP= ROUTE_TABLE=aks-agentpool-34464070-routetable PRIMARY_AVAILABILITY_SET= PRIMARY_SCALE_SET= SERVICE_PRINCIPAL_CLIENT_ID=msi NETWORK_PLUGIN=kubenet NETWORK_POLICY= VNET_CNI_PLUGINS_URL=https://acs-mirror.azureedge.net/azure-cni/v1.1.8/binaries/azure-vnet-cni-linux-amd64-v1.1.8.tgz CNI_PLUGINS_URL=https://acs-mirror.azureedge.net/cni/cni-plugins-amd64-v0.7.6.tgz CLOUDPROVIDER_BACKOFF=true CLOUDPROVIDER_BACKOFF_MODE=v2 CLOUDPROVIDER_BACKOFF_RETRIES=6 CLOUDPROVIDER_BACKOFF_EXPONENT=0 CLOUDPROVIDER_BACKOFF_DURATION=5 CLOUDPROVIDER_BACKOFF_JITTER=0 CLOUDPROVIDER_RATELIMIT=true CLOUDPROVIDER_RATELIMIT_QPS=10 CLOUDPROVIDER_RATELIMIT_QPS_WRITE=10 CLOUDPROVIDER_RATELIMIT_BUCKET=100 CLOUDPROVIDER_RATELIMIT_BUCKET_WRITE=100 LOAD_BALANCER_DISABLE_OUTBOUND_SNAT=false USE_MANAGED_IDENTITY_EXTENSION=false USE_INSTANCE_METADATA=true LOAD_BALANCER_SKU=Standard EXCLUDE_MASTER_FROM_STANDARD_LB=true MAXIMUM_LOADBALANCER_RULE_COUNT=250 CONTAINER_RUNTIME=containerd CLI_TOOL=ctr CONTAINERD_DOWNLOAD_URL_BASE=https://storage.googleapis.com/cri-containerd-release/ NETWORK_MODE= KUBE_BINARY_URL=https://acs-mirror.azureedge.net/kubernetes/v1.19.9-hotfix.20210322/binaries/kubernetes-node-linux-amd64.tar.gz USER_ASSIGNED_IDENTITY_ID=1a2d3d2b-7365-40b6-8efd-77018804e4b7 API_SERVER_NAME=agentbaker-agentbaker-e2e-t-8ecadf-9b38d47a.hcp.eastus.azmk8s.io IS_VHD=true GPU_NODE=false SGX_NODE=false MIG_NODE=false CONFIG_GPU_DRIVER_IF_NEEDED=true ENABLE_GPU_DEVICE_PLUGIN_IF_NEEDED=false TELEPORTD_PLUGIN_DOWNLOAD_URL= CONTAINERD_VERSION= CONTAINERD_PACKAGE_URL= RUNC_VERSION= RUNC_PACKAGE_URL= /usr/bin/nohup /bin/bash -c "/bin/bash /opt/azure/containers/provision_start.sh"