[base64(concat('#cloud-config

write_files:
- path: /opt/azure/containers/provision_source.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/6xYbXPaOhb+7l9x6jJ56a0xkN622Q7doeAk3lBgbZO7u70dj7GOQRMjuZJMktvmv+/IBsdJaF7u1B8YLB2d85y3R7JevrBnlNmzSC4Mx/PCI3fohH/0gv5JGLifnfE06L4FQ6IC69KgCXwBKwGbZ8qO/soF2jFnKqIMhbQzwVdUUs6aMV9mKSqErx9ALZAZUDwYLziYvVRgRK5ARAwUB5nHMUoJeEkVZfNms2luxC+pgpaRUMMoVjb2SKRw/3Vjb8GlYtES91+DVJFQcS4VX8pY0Ex9/FigWxpGwgVQoAwaexK/QRsO3rZa+x+A8MJA6Yx8zJlQ8lzE2JSLO94AzAVmYB19g92XJ85w4ni+Mz7afYbCnR2YCYzOC40JvYHVoGDhtwLwPatFWBrbc1UIYSqxkpYpYgbtjQXCGRoSCVgUTLsG2ybm04Eb5b9nLDAuIqrChIswoSmWjrUfXU+ZVFGaSh2rHz8e9vyJkGoq/yaomLOEzn8lphuNRtFpv10aTtAfhBPH8cK+4wXdxl7ZAd9vj7tHbr8XOP41/IA4V2CR3S+7ukE7NwNfi4H2zcDrYqCxt9f4PhoPnNAdDZz/XP/W3t/fr5k9df67zerEc896gaOnf53VNbsU9PIFGmMful1o9MeeM/bDsR+Oep8d+Frvg5JJ+ouIzSmbA8EkylMF5/kMY5XCjDJIeRwpylnJJqfTT04/GHaLVKzFCmapKG0VCVvkzBY441xZAr/lVCC51X6e82k8Djzn31PXcwZdJXI0qm67M5lEekKbKNObC+yRJWVTiWLjqtn4fjyZhjog1ya86IKpVZq3fY1TjNg0O55MB4KuUMhC6dnJIByOj/2i7Ca94KRbq7LVgljrQq+4uPK0cW8p3A8tQYWxQgJznhJkQJfRHCETuNFr1rH1N1XtajFZTB1Nh8PQHflBbzgM70SlilkVBtcPz04G1yZ0QYfgdgRuYE2lTvfZyQAIlUpwmOUKiubd4hXjChKeM2Ju4U4tXnTsaByER+PpaFAn4e3gi3xviuamUKefpqNgWitUzevaq61atIubNNd8XId1gJm8CU/p9HEtBR9AntMsK4s+Q0aQxRTlZvm64p+AsZ5xJnVx5oSqQbm0VFZl1cuZokusxgXV3fMS3ATi4j/MUVUYkBSqIZcIVEEk9asWhDilhRBGBHgCsRJGf+iGwXg87JqlJtOozI9QXXBxPknzOWUPnABMXx8BYNNlOjTHkymQslnMra22rcpoAtszdqcS1/Bq/VgrnDKWd+YqBM6o92nohBrIwDlz+044GU6P3VHoHoUjxxk4D3WAvJIKl7FKHRbNUuwxUjrOVpTQyCK4ojFaWRGu2zvTfXt+0POC8KjnDrecGDZ2BlRWhni21c7G9YQ+lCCHkZ+np8r3aT7DFNVpSc49RvS/ieCXV/VifvHYzlAkwJv0S+oVGCnUij5HjCYo1YCKGiOfvpe1t/7INfRT6qjKn1RDnzmjigsfhY7BZtS/krofype1F+u3f/FcsCgtHHi0uJ7esfq5zYwdQtoxtt9ZrXeHaL1pHcTW7OD3jhW1DzttxE7rHSJ8BFteSXuWS3u11L/rJNiLVZgrmto5m1FGbiphfU5sH9A/f7mVP5kJNqrYFnFT79VprZbEstiS9WykN7VMNXWSmsQ+PMxQUE5o/ByGizIVzlGFWS7mCJ0WHLSg3WlBlEXxAjuWhiVhp9xYe0N30Avc8Sh0PK/bMozexA19xztzvHAw8kPPCTzX8bud1gZBTaCw3e3Cq2Ym6CpSmFJ23nxVh/NTdcWnjuf43caeQCWu4iUJaRImEU1zgdD4vn3ltf6yASZTzs/z7LaYhnO9b/iB3238cwPXD4o2at2jPz3pOUU4X5ntt++bbw+a7c5hs/3WfAX3K/BOpAqqOX3vhzX7vf9NPacAOxyPT6eTn1DOEzRt06FZZ6OmJtofj0ZVWH9v1b17XqbK52ea261WnfkfTVl98TpnMVirv7ZkDN68OdAU/oS4FFqLiKw3/cbtc+jdk91ueb6Fzfn2NZQDmpcZJ6i/l9uwpCxXuFssq+4HwIrBlItcEX7BwBLQhh3zbzBXlKllJM7/6A0pyy97c2QKcrbgKYGde3l9nmo7l8JO6ayijXIzI00S0fRqrf6pGKqLB7Nf3C9AecEACWVULpA0dWmARLFCofc3hrE+fkG8wPgcYk7wHyY0bufwgW0SGdl6j7E8J1SAlW3/jNRnTcXzePHkSxkjkxDll8nFhabqm0WVpJXJZsrnsGMY5RnijgvGS2d8ZPw/AAD//5I04fY5EgAA

- path: /opt/azure/containers/provision_installs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision_configs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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







- path: /usr/local/bin/configure_azure0.sh
  permissions: "0544"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/6SU0W/bNhDG3/lXfJGFqsVmyR720CQQBsF2N6ONEsTZiiFwDVqiLM4KqZJUPNf2/z5QchS5W7ZhexN0d9/9+N2RvbOg0ipYchEw8Ygl1TkhPUyNpyFFsYVgCdOaqi2MRCJFxleVYqBfKsUG4AI/LythKgzf+oPvSaGXC8UKRjVDn2MPulmj/8678ODtSsWFgfvdwWv+ezt3GLrDSxwDw4OHPVaKleh/5nA+VbW06xCe4R7uDzgLMcD8EiZnggAAS3IJb2rANYQ0TzCzNS9bWC5WR1yvqfmdGwxIxskprvo/uHA+1Q78B9i6zv/XzD2McpaswTOr3GQhEfxYa8VNzhTzfR9CQjCW2tGpSsDkXEMnipfGlgtpSA9RoSVSKTyDDRXmJHeTM1GjVrol6ieCk3ucoZ8hYCYJEsEDwYyfBsNBv07xLUrBtcEcr149wVvyeArD6AMemDBcCotKTdPraIrlZSkyqZDQgif2BGYj1RqlLHiy/YuzkNpYJz7Ju4C7iyd3H69v3y9urj9MR78emtHcw/lzBGEIp+nnYH4ytL93foCl4umKWXxaKEbT7fMtSUkPH9nR3O4geAYtfcJLFFysoXO5eZLr+KUqsSiLasXF6zfYHWlKqYz1cTG6vrqK4nHoDutIQs0/j2OP3z7D8wV9YKAabv2xh58I/gtTmktR/348fu/hN/31/fybEDubftFUfYvnmou24tAtGczt/QhkaWom+8Q0C/QomCEHQjqHiW5/nIXe+7ezxc31eBFHV5PZTTSahCnLaFWYy24kbP2NrNwonnrkxJf4LprGk9vpODw/Pz/vxuLJXTwLA1UJa5HQQStFv9i17qRO39W9mMm/FrmJ7n4Ku8cidpC1Hmiawn29pJrV1rq7tuvhTWeeiMZj0j4U/ZX56qVo9VJWwHlJ0Hle0GG9oJ0G48kHcqLyItUfAQAA//+8Xj4iAgYAAA==

- path: /etc/systemd/system/kubelet.service
  permissions: "0644"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/4yTT08bMRDF7/sprIhDezCG/rkU+QBloRERRWwQhxBFXu8kGcU73trjEFr63atNCJAQpO5pd/x+783a48ENIQ+zU4g2YMPoSV+kEhxw9t1ThW3lyvA0X2DkqFWKQTlvjVMlkpo9SbNsUECYo4Vhdg2RTWBt3L15iFlOcwyeaiA+QwdaAVtVwdgkx898kayFGPMFcsGGU9SHXz5n+QJs0XpdBdDLvNLEqVC+YWV+pwDKemKDBCGurfbjdAdXzyoMQjZCzU1QDsvn5P/RWsL3epFWdHAsBmLvQ+0TsXgUkwCNuOtsJ911xKO4t0K6j0I6EAdiKI4ET4HEKnaJS1kiVW/afFs4EmPs7Or+yaY2M5BxagK8dcs2OaliS0LJpnQQhWRBpvVwGHmnFJttKaUaAto1tJWwNTXW0xgnKcBoeYoH7Zm9AO/MmLjLxNMjJVCbLyOEOYSNFfIVSGdKcFF39v5c3Jzkvbw/uvx5mo96xyd5r/jb2QDm+pOQ8nmQZEjEWIMOUHsGIdcFGeBXgsiy/fCJ9eHXehcogarGI7FOhItvSqmQ6GVQq1ev+9Hb2WYz3qUaZOPSBElWGFbXpd2CQMAQ1UqxEsRX7N76T896x+fFroXr/Lxb9PPr5V7sKN92+z9G/ePuZb/IskGXIhvnhtmtIYbq5EHXyTHKFCHsswkT4H8BAAD//5yxbXI7BAAA



- path: /etc/apt/apt.conf.d/99periodic
  permissions: "0644"
  owner: root
  content: |
    APT::Periodic::Update-Package-Lists "0";
    APT::Periodic::Download-Upgradeable-Packages "0";
    APT::Periodic::AutocleanInterval "0";
    APT::Periodic::Unattended-Upgrade "0";








- path: /etc/containerd/config.toml
  permissions: "0644"
  owner: root
  content: |
    version = 2
    subreaper = false
    oom_score = 0
    [plugins."io.containerd.grpc.v1.cri"]
        sandbox_image = "oss/kubernetes/pause:1.3.1"
        [plugins."io.containerd.grpc.v1.cri".containerd]
            [plugins."io.containerd.grpc.v1.cri".containerd.untrusted_workload_runtime]
                runtime_type = "io.containerd.runtime.v1.linux"
                runtime_engine = "/usr/bin/nvidia-container-runtime"
            [plugins."io.containerd.grpc.v1.cri".containerd.default_runtime]
                runtime_type = "io.containerd.runtime.v1.linux"
                runtime_engine = "/usr/bin/nvidia-container-runtime"
    
    [plugins."io.containerd.grpc.v1.cri".registry.headers]
      X-Meta-Source-Client = ["azure/aks"]
    [metrics]
    address = "127.0.0.1:10257"
    #EOF

- path: /etc/containerd/kubenet_template.conf
  permissions: "0644"
  owner: root
  content: |
      {
          "cniVersion": "0.3.1",
          "name": "kubenet",
          "plugins": [{
            "type": "bridge",
            "bridge": "cbr0",
            "mtu": 1500,
            "addIf": "eth0",
            "isGateway": true,
            "ipMasq": true,
            "promisMode": true,
            "hairpinMode": false,
            "ipam": {
                "type": "host-local",
                "subnet": "{{.PodCIDR}}",
                "routes": [{ "dst": "0.0.0.0/0" }]
            }
          }]
      }

- path: /etc/systemd/system/containerd.service
  permissions: "0644"
  owner: root
  content: |
    [Unit]
    Description=containerd daemon
    After=network.target

    [Service]
    ExecStartPre=/sbin/modprobe overlay
    ExecStart=/usr/bin/containerd
    Delegate=yes
    KillMode=process
    OOMScoreAdjust=-999
    LimitNOFILE=1048576
    LimitNPROC=infinity
    LimitCORE=infinity

    [Install]
    WantedBy=multi-user.target

    #EOF

- path: /etc/systemd/system/containerd.service.d/exec_start.conf
  permissions: "0644"
  owner: root
  content: |
    [Service]
    ExecStartPost=/sbin/iptables -P FORWARD ACCEPT
    #EOF

- path: /etc/crictl.yaml
  permissions: "0644"
  owner: root
  content: |
    runtime-endpoint: unix:///run/containerd/containerd.sock
    #EOF

- path: /etc/sysctl.d/11-containerd.conf
  permissions: "0644"
  owner: root
  content: |
    net.ipv4.ip_forward = 1
    net.ipv4.conf.all.forwarding = 1
    net.bridge.bridge-nf-call-iptables = 1
    #EOF



- path: /etc/systemd/system/nvidia-modprobe.service
  permissions: "0644"
  owner: root
  content: |
    [Unit]
    Description=Installs and loads Nvidia GPU kernel module
    [Service]
    Type=oneshot
    RemainAfterExit=true
    ExecStartPre=/bin/sh -c "dkms autoinstall --verbose"
    ExecStart=/bin/sh -c "nvidia-modprobe -u -c0"
    ExecStartPost=/bin/sh -c "sleep 10 && systemctl restart kubelet"
    [Install]
    WantedBy=multi-user.target


- path: /etc/kubernetes/certs/ca.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    

- path: /etc/kubernetes/certs/client.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    



- path: /var/lib/kubelet/kubeconfig
  permissions: "0644"
  owner: root
  content: |
    apiVersion: v1
    kind: Config
    clusters:
    - name: localcluster
      cluster:
        certificate-authority: /etc/kubernetes/certs/ca.crt
        server: https://:443
    users:
    - name: client
      user:
        client-certificate: /etc/kubernetes/certs/client.crt
        client-key: /etc/kubernetes/certs/client.key
    contexts:
    - context:
        cluster: localcluster
        user: client
      name: localclustercontext
    current-context: localclustercontext
    #EOF

- path: /etc/default/kubelet
  permissions: "0644"
  owner: root
  content: |
    KUBELET_FLAGS=
    KUBELET_REGISTER_SCHEDULABLE=true
    NETWORK_POLICY=
    KUBELET_IMAGE=hyperkube-amd64:v1.15.7


    KUBELET_NODE_LABELS=kubernetes.azure.com/role=agent,node-role.kubernetes.io/agent=,kubernetes.io/role=agent,agentpool=agent2,storageprofile=managed,storagetier=Standard_LRS,accelerator=nvidia,kubernetes.azure.com/cluster=',variables('labelResourceGroup'),'

    #EOF

- path: /opt/azure/containers/kubelet.sh
  permissions: "0755"
  owner: root
  content: |
    #!/bin/bash

    


    # Disallow container from reaching out to the special IP address 168.63.129.16
    # for TCP protocol (which http uses)
    #
    # 168.63.129.16 contains protected settings that have priviledged info.
    #
    # The host can still reach 168.63.129.16 because it goes through the OUTPUT chain, not FORWARD.
    #
    # Note: we should not block all traffic to 168.63.129.16. For example UDP traffic is still needed
    # for DNS.
    iptables -I FORWARD -d 168.63.129.16 -p tcp --dport 80 -j DROP
    #EOF

- path: /etc/sysctl.d/999-sysctl-aks.conf
  permissions: "0644"
  owner: root
  content: |
    # This is a partial workaround to this upstream Kubernetes issue:
    # https://github.com/kubernetes/kubernetes/issues/41916#issuecomment-312428731
    net.ipv4.tcp_retries2=8
    net.core.message_burst=80
    net.core.message_cost=40
    net.core.somaxconn=16384
    net.ipv4.tcp_max_syn_backlog=16384
    net.ipv4.neigh.default.gc_thresh1=4096
    net.ipv4.neigh.default.gc_thresh2=8192
    net.ipv4.neigh.default.gc_thresh3=16384

    #EOF

runcmd:
- set -x
- . /opt/azure/containers/provision_source.sh
- aptmarkWALinuxAgent hold
'))]