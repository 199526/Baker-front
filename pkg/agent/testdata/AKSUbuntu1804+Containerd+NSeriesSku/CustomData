#cloud-config

write_files:
- path: /opt/azure/containers/provision_source.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision_start.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/5SSX4vTQBTF3/MpDmG0CXaM1bdCK0s6SAVbaVLYByFMJ9c2GjNx/ixV1+8u6fYf7lpqniacO7/DnHOTVdUkK2k3SHTrEvnTG0qUbpysGjI2aY2+q2ylm5d2g/EYyZ00Sa3Xh8naW0eGn8Zqvcbr8fNBIG6neZHOJ2LE3gb2h3X0TbkanDeat3JNBryGddJ5i69+RTW5awy4ssS1d613J6/5Mv+4zEcsUtL9N+EeG5IleIM3r+Igy28WeZFPP4gRi0htNEL2gA9xD+UdeIlevwf+GXxwvDyIgzQThbgV6TKfzmfFZLm46Q4HCosiFpXSEV48szE49n+8RMhOpuFOjuM4ePBOM4FcO1lDbEl5V+kGE29kdxiypy0BS0o3pQ2vCpQOYF7uwfa8xb/p2bUx/4MbB8H7bD4rsnwxnb0bsQhfvnfhfwrw6ONcmjVIIWTHdQovTOr2rK0LQIPwol7uDB+9/Ok7vV9iW7lUlzQEI9XHfLdbQzDd9iGM0aYTTB9pJo4tHkq0nVb+7mHfODsLJ6Bt5XB6+p8AAAD//9CDYZutAwAA

- path: /opt/azure/containers/provision.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision_installs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision_configs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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





- path: /etc/systemd/system/kubelet.service
  permissions: "0644"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/4ySz0/bThDF7/4rRhGH7/ewbOmPS5EPUAyNiCjCQRxChNbrgYyynnV3Z0No6f9emRAgYKT6ZM++z5vn1ZucM8k0O8BoA7VCnvPjVKFDyb55rqmbnBqZFUuKEnOdYtDOW+N0Raznj9Ism5QYFmRxmp1hFBMkN+7W3MWs4AUFzw2yHJLDXKNYXeO1SU6e+DJZizEWS5JSjKSY73z+lBVLtGXndRowf9hXmTgD7VvR5lcKqK1nMcQY4tpqO856uGZeUwDVgl6YoB1VT5v/RWuZ3suiLAzoGiaw9V/jEwvcw03AFi4HrzddDuAebi0o9z8oh/ABprALMkOG1doHXKmKuH4T8+1gF65p0Jf+0aYxc1RxZgK+dcs2OaVjR2IlpnIYQQmw6TwcRemVUvtayqnBQHYNPVPvNAYuM3h8lELu3FTEsMCwccK+RuVMhS7mg63fx+f7xagYX538OCiuRnv7xaj8M9gAFvlHUOqpFiokFmowD9h4QVDrgQr4M2EU1X34JPnOl6YPVMh164klT0zLr1rrkPi5dvWL1+3o7XwzjHepQdW6dEOsagqr8ndXEBgFo14pVoL4gt1a/+nhaO+o7Ds4K46G5bg4e7iLnvHFcPz9arw3PBmXWTYZchTj3DS7MCxY79/lTXJCKkUM22LCDcrfAAAA//8PqjOJCQQAAA==



- path: /etc/apt/apt.conf.d/99periodic
  permissions: "0644"
  owner: root
  content: |
    APT::Periodic::Update-Package-Lists "0";
    APT::Periodic::Download-Upgradeable-Packages "0";
    APT::Periodic::AutocleanInterval "0";
    APT::Periodic::Unattended-Upgrade "0";








- path: /etc/containerd/config.toml
  permissions: "0644"
  owner: root
  content: |
    version = 2
    subreaper = false
    oom_score = 0
    [plugins."io.containerd.grpc.v1.cri"]
      sandbox_image = "oss/kubernetes/pause:1.3.1"
      [plugins."io.containerd.grpc.v1.cri".containerd]
        
        [plugins."io.containerd.grpc.v1.cri".containerd.untrusted_workload_runtime]
          runtime_type = "io.containerd.runtime.v1.linux"
          runtime_engine = "/usr/bin/nvidia-container-runtime"
        [plugins."io.containerd.grpc.v1.cri".containerd.default_runtime]
          runtime_type = "io.containerd.runtime.v1.linux"
          runtime_engine = "/usr/bin/nvidia-container-runtime"
      
      [plugins."io.containerd.grpc.v1.cri".registry.headers]
        X-Meta-Source-Client = ["azure/aks"]
    [metrics]
      address = "127.0.0.1:10257"
    
    #EOF

- path: /etc/containerd/kubenet_template.conf
  permissions: "0644"
  owner: root
  content: |
      {
          "cniVersion": "0.3.1",
          "name": "kubenet",
          "plugins": [{
            "type": "bridge",
            "bridge": "cbr0",
            "mtu": 1500,
            "addIf": "eth0",
            "isGateway": true,
            "ipMasq": true,
            "promiscMode": true,
            "hairpinMode": false,
            "ipam": {
                "type": "host-local",
                "subnet": "{{.PodCIDR}}",
                "routes": [{ "dst": "0.0.0.0/0" }]
            }
          },
          {
            "type": "portmap",
            "capabilities": {"portMappings": true},
            "externalSetMarkChain": "KUBE-MARK-MASQ"
          }]
      }

- path: /etc/systemd/system/containerd.service
  permissions: "0644"
  owner: root
  content: |
    [Unit]
    Description=containerd daemon
    After=network.target

    [Service]
    ExecStartPre=/sbin/modprobe overlay
    ExecStart=/usr/bin/containerd
    Delegate=yes
    KillMode=process
    Restart=always
    OOMScoreAdjust=-999
    LimitNOFILE=1048576
    LimitNPROC=infinity
    LimitCORE=infinity

    [Install]
    WantedBy=multi-user.target

    #EOF

- path: /etc/systemd/system/containerd.service.d/exec_start.conf
  permissions: "0644"
  owner: root
  content: |
    [Service]
    ExecStartPost=/sbin/iptables -P FORWARD ACCEPT
    #EOF

- path: /etc/crictl.yaml
  permissions: "0644"
  owner: root
  content: |
    runtime-endpoint: unix:///run/containerd/containerd.sock
    #EOF

- path: /etc/sysctl.d/11-containerd.conf
  permissions: "0644"
  owner: root
  content: |
    net.ipv4.ip_forward = 1
    net.ipv4.conf.all.forwarding = 1
    net.bridge.bridge-nf-call-iptables = 1
    #EOF





- path: /etc/systemd/system/nvidia-modprobe.service
  permissions: "0644"
  owner: root
  content: |
    [Unit]
    Description=Installs and loads Nvidia GPU kernel module
    [Service]
    Type=oneshot
    RemainAfterExit=true
    ExecStartPre=/bin/sh -c "dkms autoinstall --verbose"
    ExecStart=/bin/sh -c "nvidia-modprobe -u -c0"
    ExecStartPost=/bin/sh -c "sleep 10 && systemctl restart kubelet"
    [Install]
    WantedBy=multi-user.target


- path: /etc/kubernetes/certs/ca.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    

- path: /etc/kubernetes/certs/client.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    



- path: /var/lib/kubelet/kubeconfig
  permissions: "0644"
  owner: root
  content: |
    apiVersion: v1
    kind: Config
    clusters:
    - name: localcluster
      cluster:
        certificate-authority: /etc/kubernetes/certs/ca.crt
        server: https://:443
    users:
    - name: client
      user:
        client-certificate: /etc/kubernetes/certs/client.crt
        client-key: /etc/kubernetes/certs/client.key
    contexts:
    - context:
        cluster: localcluster
        user: client
      name: localclustercontext
    current-context: localclustercontext
    #EOF

- path: /etc/default/kubelet
  permissions: "0644"
  owner: root
  content: |
    KUBELET_FLAGS=
    KUBELET_REGISTER_SCHEDULABLE=true
    NETWORK_POLICY=
    KUBELET_IMAGE=hyperkube-amd64:v1.15.7


    KUBELET_NODE_LABELS=kubernetes.azure.com/role=agent,node-role.kubernetes.io/agent=,kubernetes.io/role=agent,agentpool=agent2,storageprofile=managed,storagetier=Standard_LRS,accelerator=nvidia,kubernetes.azure.com/cluster=resourceGroupName

    #EOF

- path: /opt/azure/containers/kubelet.sh
  permissions: "0755"
  owner: root
  content: |
    #!/bin/bash

    


    # Disallow container from reaching out to the special IP address 168.63.129.16
    # for TCP protocol (which http uses)
    #
    # 168.63.129.16 contains protected settings that have priviledged info.
    #
    # The host can still reach 168.63.129.16 because it goes through the OUTPUT chain, not FORWARD.
    #
    # Note: we should not block all traffic to 168.63.129.16. For example UDP traffic is still needed
    # for DNS.
    iptables -I FORWARD -d 168.63.129.16 -p tcp --dport 80 -j DROP
    #EOF

- path: /etc/sysctl.d/999-sysctl-aks.conf
  permissions: "0644"
  owner: root
  content: |
    # This is a partial workaround to this upstream Kubernetes issue:
    # https://github.com/kubernetes/kubernetes/issues/41916#issuecomment-312428731
    net.ipv4.tcp_retries2=8
    net.core.message_burst=80
    net.core.message_cost=40
    net.core.somaxconn=16384
    net.ipv4.tcp_max_syn_backlog=16384
    net.ipv4.neigh.default.gc_thresh1=4096
    net.ipv4.neigh.default.gc_thresh2=8192
    net.ipv4.neigh.default.gc_thresh3=16384

    #EOF

runcmd:
- set -x
- . /opt/azure/containers/provision_source.sh
- aptmarkWALinuxAgent hold
