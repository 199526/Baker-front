#cloud-config

write_files:
- path: /opt/azure/containers/provision_source.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision_installs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision_configs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/7xbe3ejOLL/359Cy3inOzODnX5Mb3fuuvcQIFkmNngAZ7rvZA5HBtnRmIdHiCTexN/9HkmAwQY/Tu+5/UfSsap+qoeqSirJ3/2tP8VxfwrT+45pabpnmJr+ZdB9fZ+kNIYRAi+AQhwC2QdvzwSJqYz0CsVZB8/A77+DruWAwQB0VcvWLcezHE4I/vjjfwC9R3EHAADGtnGruLpnjAfd13gJIEjvk0eA6P05eAFzgpZAHifgFY4RBXc3v98FvT9+fHXWQWGKdgFKGWUDvAA/o0AOXoFXQJ69OevMcEd3Vc0b67rtTezhQLqndJle9Pvd5w3K+uLtu4/nkiBVh4ZuuvuJ//FJ6nT8JJ7heUaQEkQ4nqSIvD575vL593COgKwD+Q2Tiv2MwDmQR+AT+wek7rOijQxz4uj2WqqyhNtj68o8DvIJomkxizI2HN2+1W2vEO5G/+qNFfffA6mPqN9fZFNEYkRR2vcRoWkfLnGKyAMivQVaiXlpkvn3fNJWtFLCKAnA+Yfz8yPJk8cYkCShF+zHQR7OpCpH6+LDBiUa+Bul30e3I3YzMafmC+ZEJyDqB61e2AfYqMkRDCIw5f9wXSxnZDnexDbWUj0oC9WZeBfsx5HoM1wxRR47p5jCDzGKaZspWgDbTXGIYce7B7g2uvEUcopmS4RI93mTT9dtSjYit6u4j/xbfb0Pu+bpfFGouu0aV4bKyI9c9D6hexb9NuCWGd6/P5qh2dPtXDur+BTd8lXcolsLYLtuhxj2ruK9unEHn6LZ7ipuUbIRuV3F/eTNCrbxcKYUUfDjE/8v8u+T1oKzlsALmMIUfXgPZDlAfhIg8Pmomlbg1itCO2B7mSmQWhJsO+QRGbmGvZvZDmDvT6A1bO6Ow4j7ckqTHSoOPs4OLauoyQ7HY+8PwV07MMJjDNEAuO50UJxmBNlj9fUZELu7dJVSFPk01GM4DZESBw6FhAKy9Kc4DsDLC0BPmIKubtue89Vx9ZHqDj3HVWzXu1KM4SEUOaWQHoNTiqdkAaZaLqGoNCxqJprhap5uKpdDXVtLbPtPSYbqJadNEMgwj9Om3P7jGYBLCkKcUiDLOE4pDEMUFGeHVwLzVa3gwSX15oh6y4zMEXh7Dt6dgzdvz4v5vy8qHP9R3XTfZFMUIurw4qUiQksP3Uwu9aHunrr/WwjA7S3gFhpbJifA8JzMcZIlitM0BHMUkxQCOcko6B4QFbw9f/+xxk3QX0CO0SOQn34+/wTkAK5S8I935+dAXqDVYcDGaUudgJxm0z+B1FfNQV5b2Clx67hz8zHdsfXRp4O2XWUbUON26yDxTpnaw7F9ZptcDg31hCPbbtltBWusuoep9x3YdliEOv87sXXvF8cyW5SA/8kI6v2ZJvG27HXO5jNmC82unDuEbTuCBv+0J+0D7m/YZZRWOmqT0egG/oNRGKrOZjZVY6wMi3Lk6Kqtu4Pu8wGKfv/urn93d3e3/q/hSQxPEng+pOCf/wS6dZUrteMAEbaSHyZZIF0ASWELYZxNQ+yr/LOfBAFFMYypwWm6z65uKqbrGdq6GE+zaeoTvKQ4iQsqZ3LpqLYxdg3LrNJCGKg87kvCNqWamER35QCjsEbJTFCaZMRH1yTJloLV1h1rYqu6d21bk3FJGSY+ZDoIoqGlKkz6cvghcldLJAZvR577daxXTRAjasIIleqbFRlS5GcE0xWXYUNl6u5vln3DJJ7Yhvt1S56HGuStYbsTZejlTDUqe1fHLXKvRWeSZBS5rNxvZrKtiat7LtsrlHRLgiNIVsoDxCGc4hDTlVOVbmwbI8X+6im3ijFULo0hU8epmCAHcHwYokZOR1WGeo2FL8wxSR5wgMgl9BfJbDZKgpxPHVoTbWxbt4am296lot5YV1feyNL0vQDSBWjhXe/hshElGKXtzJ6tu7ahO/tA9KdlEqOY7kHRv4wtUzfdfTBaRopl2gajTWyxdvfA/IIpRWQPyC+G6+p2I4QNKRriCDepYiuuPjRGRrMOJeevY2cfs/fruNmWJcBl5i/QXgG8y4l6ox+W4zeCKTokjPebbbj6MSIdhhNy1RGzFI1gDOcoMAIUU0xX+hNFcVo4euLo3kgxlWtd8wxNN10WYPoXVzediqOzFBElTfE83uAYmgiYiaPbnuI4xrVZxajk2SxFBtupxz4aIQoDSGE5t2E6rmKqujfSXUVTXGVdZk0YXMKQMRFnkRXJU9G8S2XIOGzPuZmUcwQ4ZdnGyug0yeLAMRWXz1Hn0AyHpR/PmriX1sTUPEZXzIie/DAL0AimFJErkkQOhXEASTC85FD6F3U40Zi5HFe3vSvbGrFTiqkptuYNL9dlRhLuu4VZWMlHNyPHK312q0yGbr7xzdki+ISjLBpW1LazEKlJlkf2SPlijCYjj2lUKmRPhrqnWpNNaBfT36BVMfniYyrtjt4ikq8CiW2+deuq3DnJT5WO4oGcCAZAeni702VkQAGQMZD6+3JWP5BA+8bxOCyRcY5AKrqY7Qe82iFENY3yEMJ/EETJyo8CD8+8GcRhRhA/SP4M3v4MoiRYkmSKwJR4MaIzHFJE6ofbkcWMeKlvzuh8HynHQKoySeCz0CRKgixEqcxCoRf0qzQ9JmVdGdU0jDEvuakQeUuXYrDUqXRvUcvHw8m1YQqXctM1eDV6AF3VNLxLw/Q0w+6/OZeFldlU/FjOh1XLvDKuOUXJKnb4bIO/TbIDUvLsymgNDfWraDVIPgyxnzRIWa6YV+l3UsRruzQlOJgjqfybEhinS0hY5fxu/uoEoVC4XyyJub1tME5iblfw/fdbGEU8DUBNtv9v7XgnRPzrp1Mc99GU8oUDZApiSIEsl/SiYZL3iNQkphDHiAT5EnuEmHqzhHgzHPJIOQdvxMoWLaEg/933S84eO/FiH/WCPnpCvpdSSCiXsR5KV8ZQ935TXPXfnmuMdGvi7p1vM0FfhESPJlH4TZDpKvVp2Av6b97IFfmPFHVvKhHQQJaFeXY6ZKo79Gyd1QGWz8r2GsCpDH2KHxCQ5b8yjCgIEn+BCFtqr0syLy+VlU5YTtbQidM8zVJvWK11rTHPW2ed9o7exg6n9BZHSYxpQhzh+XrKzWcfWabhWhuhmCGFZQdN60noI0cCuEdxhAiHa3Rn9+AkRzi0VdRjhcwX/uliHi1gm9earHWc/8rQzwvpTs9O06/4TmdjhADN2L6o6GHuUbcJ4yg9GWOe6cS8D5D0Qzwt5uS/RRo4MH0F5eiZmcj2xGQfF/lWdCxyYZIlFfuSTVIqO7q99P4Ig7Sjf9MyyGWoY5Rt3PrdQuVHGcZDOEWhmQSVHcZQudSHnmlpunOEEUIGIMcMYb8hWmCP0r7GeyhEaxIdjM826G/ySkWEU3Kqw0tI6Yi8aNSiolbEPn36JIs/ZLhIN7vLZk134Y7SsanovX3fWPM2mvySZCSGG1WeN9sw3oR1aELgHA2W7DiTUrbf2abgiCP4NEnR4M319rCdxSzltY5fJeQRksBNnFUaJvPBCqWCZA0+f65vZ/4UsgYb+7W5NeeQC45TfHvzMWVbLZKE4xDGqLqf79r6pWW5tv7rxLB1jaGyLaZplSdevrmnJGN70K1tJUE0I3Gnsgfcu0sRGdIdgref+wF66MdZGAI/zNjpWcbxLNnKJB8dlrlMw7wuFwU7oRAEKa8fIxjjGUqphkmtjowU07jSHVcz7MH2AS/KecSJJ1oEmAB5KUSr8LGJHgkW86g889emEAuZT3CfRKjfLZ/h9Xtsti1CHj/dGmO/Uk/qYpQklUuQbh2rcrexmfli898moCPJK/Ds8PUPdvhqAitPZg2sO3cpHVmWO3CJ8w7CBXh408kdn1505GIRXAhsRCieYR9SJMOM3icE05UcQAovwJ3UVZXqtfidlM/IDuQXtSIsbk46AMQwQpy16MP8qpl3EjvqUvREhQDi/7kAuTS7LGw0S3eHZBhEOOYEbZNlhJ2s5GKiXYoFjoMLINZah03CBWuCq8zGhcmFxhy/YrzSZBWj7JouZ1ygVSPDjf71TupI4HOrp+WnTeNAFaZTMpqkPgwRUYIgicvQUYcTroUycS3eZrc9RdMss1Jgqs0Yxpv2iwwBS1A5QMswWUUopr0VjMI9hWfvjMfV2byTlL78U5jK0D6/dF/zhd3dc2lU3umdvcylA4I0T+Qg/4iZxC3Tt8yWZtOaTvUbs29Bzi/sKuDlpd23wJL5BrB+nXQSarlqFdVQkzhGPk22Fqyi8h6IqavsAKXaOm9WK0Nn0H29JDimMyA930n5wgjuJBY+f0/vpJ9A8am4KqyPFBeZ9U/r15f1MXFM1zDhQq70OFgmOKYTEgq64vF5mMxx3IuwT5I0mdEkDnGMen4S3Uk/3ZVXkKLBT1pRIj7O46vo+UT9RkGuCVzeF7d+hdAFzJwN9h5xHCSPaS9GNMdI/wpH5QzHCOEnBFVxLj6+f/8uB5vDMER7LJKP7ygSfZME/TtpLQFpXwLYOyyilpGUEcHp67FXfRjwCM7P6q92inc3C7QCJIUX788/fcgf4ojtf/U9zrsPP4v3OElGd9re+fMRH7P6JOKAkfaWKBKvc45hYJ8JjuLBzmDi9B13oCr94eABE5rBsDhRWzsfTLY/Uc2tT6SGkLzRvw66r3MbnaTW4/lZU4jrtnsa4Ebtx8JBdcjDFa4OeHxxa5vn5LpGUJB+fum2ZjueTNtm283OJozQ55et1HwSBjPqrkC67Z6EskCrHZAb/et+jE1V4K9QkhD7q62iwB+wiB79Md5lOPKSAzU6t2q7MpN+fulX60Ha384N/dp7krTfaO5mSXknLn8KeT2eaAQ/IJLa2UbFyp3eyNImw/wrXFL8gAMMRSCat4ZmKJ52M3I8dhKSyrZZsIjSfve5wrnud5+vxxNPu81fLt3otqkPiy+GZeI7WeSsvGYCMv+ewdYc690zqCB+AlL3tZ9EEYwDID8AJsHZLjHgA4CgKHlAQI5AXUjGWcoJ5AXoPlfkXFeuc/LHpfkxOAIymTWKu31Hkv8KEx+GIEzmPJ49pn1hvmTeF0Yu36oSufs6gBSBH/+envXCZL759gb4G5D5xFxm3XHXBXMgfCpvzL5rue0FUJUwvQfdAnQHU0ACOQV3JZq8GHQrxqqOyGEyl5miMle0+1xTfF0lhUCW40QOmEll7itZzih/5SMvCZrhp0FVWwnIMquG87BxVJxAeSL81yauNwrXbw5EAyNiB9s4yR4QzDYn2GkI/QW/rMyHyk5OcYvbC/ol0aab09AP8eLESymk6aYxki2Zf2UcY0pgNEuBnNVTOFfJNm512xHvH4bDWi4vywNcUi9M/EW6/w76A68f79gvuKTynEV7ArTlYn5xYYl8c3ExkGR5lhAfsdo0S8JAKpYMkFcgXxNlN1Ymois22ISBapmuYpj80YFoQDMFDMtc/7gJlfyyaHJ1ZXxZS6epTaOlhslgs1BptOQDr/MVxdMYYrot8RIx7fMB8S0mwV9GaYsVAQiWi7kcoCmQbdAro4Ffgrz9occGNmD95WJ+ohoA+EsgE1DD6Gcp6f8A+K/T4M46laS0a5vDfbrlAjMfO8b1vyfj1iu6Q2JsdbZKOUI8/fC+8nfygEgIV/JjQhjxMe8mspgCmYKck7k3TB4RCTAZcHuxGvT08YP34b0c4jh7kudx9lO2XAqSarbkwvyUT10b2RILxEmMQCv6aaZBT8uEUJa6m4pwqwXegTc8cqcwvQey38jcLsjWhUxUljqu7hTHxWqb4rjSutuxVvnYJAx6acJTXS/Ig2Jv4tt4MAxEJj5a2Cz3edjugcOz5nFbPruRMyD750fLcAx2GuH/Dt5JFlp3Og8wxKyGNNS2fXcoLSb5/vvc+fNlBkTVB2ECAxTwzLZdRo9W+fEe+/cVW5X7mN9B919gMADnu09XnJHh2bozGbJj2RG6pBEWCbC2STsaZZOXWERsY+abI4bmuIo7cQbdf1WV2AyAvzVqU6ET4jCtf5BwPEtsawRwCvyEkGxJUSD90PSOB2xZ2jCvLM+2Rp5q2fZk7Opa2y51m7PFRxU1awA7C4IlRhzPwQzHqPzOb3nl1LAQN48DRWd5I4RnXHmmrmviG2ENXwgD5bO1rd1qTcTdIKjtaFsu1rZj4MiI+063rjr/FwAA///zOZ5/DEMAAA==







- path: /usr/local/bin/configure_azure0.sh
  permissions: "0544"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/6SU0W/bNhDG3/lXfJGFqsVmyR720CQQBsF2N6ONEsTZiiFwDVqiLM4KqZJUPNf2/z5QchS5W7ZhexN0d9/9+N2RvbOg0ipYchEw8Ygl1TkhPUyNpyFFsYVgCdOaqi2MRCJFxleVYqBfKsUG4AI/LythKgzf+oPvSaGXC8UKRjVDn2MPulmj/8678ODtSsWFgfvdwWv+ezt3GLrDSxwDw4OHPVaKleh/5nA+VbW06xCe4R7uDzgLMcD8EiZnggAAS3IJb2rANYQ0TzCzNS9bWC5WR1yvqfmdGwxIxskprvo/uHA+1Q78B9i6zv/XzD2McpaswTOr3GQhEfxYa8VNzhTzfR9CQjCW2tGpSsDkXEMnipfGlgtpSA9RoSVSKTyDDRXmJHeTM1GjVrol6ieCk3ucoZ8hYCYJEsEDwYyfBsNBv07xLUrBtcEcr149wVvyeArD6AMemDBcCotKTdPraIrlZSkyqZDQgif2BGYj1RqlLHiy/YuzkNpYJz7Ju4C7iyd3H69v3y9urj9MR78emtHcw/lzBGEIp+nnYH4ytL93foCl4umKWXxaKEbT7fMtSUkPH9nR3O4geAYtfcJLFFysoXO5eZLr+KUqsSiLasXF6zfYHWlKqYz1cTG6vrqK4nHoDutIQs0/j2OP3z7D8wV9YKAabv2xh58I/gtTmktR/348fu/hN/31/fybEDubftFUfYvnmou24tAtGczt/QhkaWom+8Q0C/QomCEHQjqHiW5/nIXe+7ezxc31eBFHV5PZTTSahCnLaFWYy24kbP2NrNwonnrkxJf4LprGk9vpODw/Pz/vxuLJXTwLA1UJa5HQQStFv9i17qRO39W9mMm/FrmJ7n4Ku8cidpC1Hmiawn29pJrV1rq7tuvhTWeeiMZj0j4U/ZX56qVo9VJWwHlJ0Hle0GG9oJ0G48kHcqLyItUfAQAA//+8Xj4iAgYAAA==

- path: /etc/systemd/system/kubelet.service
  permissions: "0644"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/4yTT08bMRDF7/sprIhDezCG/rkU+QBloRERRWwQhxBFXu8kGcU73trjEFr63atNCJAQpO5pd/x+783a48ENIQ+zU4g2YMPoSV+kEhxw9t1ThW3lyvA0X2DkqFWKQTlvjVMlkpo9SbNsUECYo4Vhdg2RTWBt3L15iFlOcwyeaiA+QwdaAVtVwdgkx898kayFGPMFcsGGU9SHXz5n+QJs0XpdBdDLvNLEqVC+YWV+pwDKemKDBCGurfbjdAdXzyoMQjZCzU1QDsvn5P/RWsL3epFWdHAsBmLvQ+0TsXgUkwCNuOtsJ911xKO4t0K6j0I6EAdiKI4ET4HEKnaJS1kiVW/afFs4EmPs7Or+yaY2M5BxagK8dcs2OaliS0LJpnQQhWRBpvVwGHmnFJttKaUaAto1tJWwNTXW0xgnKcBoeYoH7Zm9AO/MmLjLxNMjJVCbLyOEOYSNFfIVSGdKcFF39v5c3Jzkvbw/uvx5mo96xyd5r/jb2QDm+pOQ8nmQZEjEWIMOUHsGIdcFGeBXgsiy/fCJ9eHXehcogarGI7FOhItvSqmQ6GVQq1ev+9Hb2WYz3qUaZOPSBElWGFbXpd2CQMAQ1UqxEsRX7N76T896x+fFroXr/Lxb9PPr5V7sKN92+z9G/ePuZb/IskGXIhvnhtmtIYbq5EHXyTHKFCHsswkT4H8BAAD//5yxbXI7BAAA



- path: /etc/apt/apt.conf.d/99periodic
  permissions: "0644"
  owner: root
  content: |
    APT::Periodic::Update-Package-Lists "0";
    APT::Periodic::Download-Upgradeable-Packages "0";
    APT::Periodic::AutocleanInterval "0";
    APT::Periodic::Unattended-Upgrade "0";








- path: /etc/containerd/config.toml
  permissions: "0644"
  owner: root
  content: |
    version = 2
    subreaper = false
    oom_score = 0
    [plugins."io.containerd.grpc.v1.cri"]
        sandbox_image = "oss/kubernetes/pause:1.3.1"
        [plugins."io.containerd.grpc.v1.cri".containerd]
            [plugins."io.containerd.grpc.v1.cri".containerd.untrusted_workload_runtime]
                runtime_type = "io.containerd.runtime.v1.linux"
                runtime_engine = "/usr/bin/nvidia-container-runtime"
            [plugins."io.containerd.grpc.v1.cri".containerd.default_runtime]
                runtime_type = "io.containerd.runtime.v1.linux"
                runtime_engine = "/usr/bin/nvidia-container-runtime"
    
    [plugins."io.containerd.grpc.v1.cri".registry.headers]
      X-Meta-Source-Client = ["azure/aks"]
    [metrics]
    address = "127.0.0.1:10257"
    #EOF

- path: /etc/containerd/kubenet_template.conf
  permissions: "0644"
  owner: root
  content: |
      {
          "cniVersion": "0.3.1",
          "name": "kubenet",
          "plugins": [{
            "type": "bridge",
            "bridge": "cbr0",
            "mtu": 1500,
            "addIf": "eth0",
            "isGateway": true,
            "ipMasq": true,
            "promisMode": true,
            "hairpinMode": false,
            "ipam": {
                "type": "host-local",
                "subnet": "{{.PodCIDR}}",
                "routes": [{ "dst": "0.0.0.0/0" }]
            }
          }]
      }

- path: /etc/systemd/system/containerd.service
  permissions: "0644"
  owner: root
  content: |
    [Unit]
    Description=containerd daemon
    After=network.target

    [Service]
    ExecStartPre=/sbin/modprobe overlay
    ExecStart=/usr/bin/containerd
    Delegate=yes
    KillMode=process
    OOMScoreAdjust=-999
    LimitNOFILE=1048576
    LimitNPROC=infinity
    LimitCORE=infinity

    [Install]
    WantedBy=multi-user.target

    #EOF

- path: /etc/systemd/system/containerd.service.d/exec_start.conf
  permissions: "0644"
  owner: root
  content: |
    [Service]
    ExecStartPost=/sbin/iptables -P FORWARD ACCEPT
    #EOF

- path: /etc/crictl.yaml
  permissions: "0644"
  owner: root
  content: |
    runtime-endpoint: unix:///run/containerd/containerd.sock
    #EOF

- path: /etc/sysctl.d/11-containerd.conf
  permissions: "0644"
  owner: root
  content: |
    net.ipv4.ip_forward = 1
    net.ipv4.conf.all.forwarding = 1
    net.bridge.bridge-nf-call-iptables = 1
    #EOF



- path: /etc/systemd/system/nvidia-modprobe.service
  permissions: "0644"
  owner: root
  content: |
    [Unit]
    Description=Installs and loads Nvidia GPU kernel module
    [Service]
    Type=oneshot
    RemainAfterExit=true
    ExecStartPre=/bin/sh -c "dkms autoinstall --verbose"
    ExecStart=/bin/sh -c "nvidia-modprobe -u -c0"
    ExecStartPost=/bin/sh -c "sleep 10 && systemctl restart kubelet"
    [Install]
    WantedBy=multi-user.target


- path: /etc/kubernetes/certs/ca.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    

- path: /etc/kubernetes/certs/client.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    



- path: /var/lib/kubelet/kubeconfig
  permissions: "0644"
  owner: root
  content: |
    apiVersion: v1
    kind: Config
    clusters:
    - name: localcluster
      cluster:
        certificate-authority: /etc/kubernetes/certs/ca.crt
        server: https://:443
    users:
    - name: client
      user:
        client-certificate: /etc/kubernetes/certs/client.crt
        client-key: /etc/kubernetes/certs/client.key
    contexts:
    - context:
        cluster: localcluster
        user: client
      name: localclustercontext
    current-context: localclustercontext
    #EOF

- path: /etc/default/kubelet
  permissions: "0644"
  owner: root
  content: |
    KUBELET_FLAGS=
    KUBELET_REGISTER_SCHEDULABLE=true
    NETWORK_POLICY=
    KUBELET_IMAGE=hyperkube-amd64:v1.15.7


    KUBELET_NODE_LABELS=kubernetes.azure.com/role=agent,node-role.kubernetes.io/agent=,kubernetes.io/role=agent,agentpool=agent2,storageprofile=managed,storagetier=Standard_LRS,accelerator=nvidia,kubernetes.azure.com/cluster=resourceGroupName

    #EOF

- path: /opt/azure/containers/kubelet.sh
  permissions: "0755"
  owner: root
  content: |
    #!/bin/bash

    


    # Disallow container from reaching out to the special IP address 168.63.129.16
    # for TCP protocol (which http uses)
    #
    # 168.63.129.16 contains protected settings that have priviledged info.
    #
    # The host can still reach 168.63.129.16 because it goes through the OUTPUT chain, not FORWARD.
    #
    # Note: we should not block all traffic to 168.63.129.16. For example UDP traffic is still needed
    # for DNS.
    iptables -I FORWARD -d 168.63.129.16 -p tcp --dport 80 -j DROP
    #EOF

- path: /etc/sysctl.d/999-sysctl-aks.conf
  permissions: "0644"
  owner: root
  content: |
    # This is a partial workaround to this upstream Kubernetes issue:
    # https://github.com/kubernetes/kubernetes/issues/41916#issuecomment-312428731
    net.ipv4.tcp_retries2=8
    net.core.message_burst=80
    net.core.message_cost=40
    net.core.somaxconn=16384
    net.ipv4.tcp_max_syn_backlog=16384
    net.ipv4.neigh.default.gc_thresh1=4096
    net.ipv4.neigh.default.gc_thresh2=8192
    net.ipv4.neigh.default.gc_thresh3=16384

    #EOF

runcmd:
- set -x
- . /opt/azure/containers/provision_source.sh
- aptmarkWALinuxAgent hold
