#cloud-config

write_files:
- path: /opt/azure/containers/provision_source.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision_installs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision_configs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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







- path: /usr/local/bin/configure_azure0.sh
  permissions: "0544"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/6SU0W/bNhDG3/lXfJGFqsVmyR720CQQBsF2N6ONEsTZiiFwDVqiLM4KqZJUPNf2/z5QchS5W7ZhexN0d9/9+N2RvbOg0ipYchEw8Ygl1TkhPUyNpyFFsYVgCdOaqi2MRCJFxleVYqBfKsUG4AI/LythKgzf+oPvSaGXC8UKRjVDn2MPulmj/8678ODtSsWFgfvdwWv+ezt3GLrDSxwDw4OHPVaKleh/5nA+VbW06xCe4R7uDzgLMcD8EiZnggAAS3IJb2rANYQ0TzCzNS9bWC5WR1yvqfmdGwxIxskprvo/uHA+1Q78B9i6zv/XzD2McpaswTOr3GQhEfxYa8VNzhTzfR9CQjCW2tGpSsDkXEMnipfGlgtpSA9RoSVSKTyDDRXmJHeTM1GjVrol6ieCk3ucoZ8hYCYJEsEDwYyfBsNBv07xLUrBtcEcr149wVvyeArD6AMemDBcCotKTdPraIrlZSkyqZDQgif2BGYj1RqlLHiy/YuzkNpYJz7Ju4C7iyd3H69v3y9urj9MR78emtHcw/lzBGEIp+nnYH4ytL93foCl4umKWXxaKEbT7fMtSUkPH9nR3O4geAYtfcJLFFysoXO5eZLr+KUqsSiLasXF6zfYHWlKqYz1cTG6vrqK4nHoDutIQs0/j2OP3z7D8wV9YKAabv2xh58I/gtTmktR/348fu/hN/31/fybEDubftFUfYvnmou24tAtGczt/QhkaWom+8Q0C/QomCEHQjqHiW5/nIXe+7ezxc31eBFHV5PZTTSahCnLaFWYy24kbP2NrNwonnrkxJf4LprGk9vpODw/Pz/vxuLJXTwLA1UJa5HQQStFv9i17qRO39W9mMm/FrmJ7n4Ku8cidpC1Hmiawn29pJrV1rq7tuvhTWeeiMZj0j4U/ZX56qVo9VJWwHlJ0Hle0GG9oJ0G48kHcqLyItUfAQAA//+8Xj4iAgYAAA==

- path: /etc/systemd/system/kubelet.service
  permissions: "0644"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/4yTT08bMRDF7/sprIhDezCG/rkU+QBloRERRWwQhxBFXu8kGcU73trjEFr63atNCJAQpO5pd/x+783a48ENIQ+zU4g2YMPoSV+kEhxw9t1ThW3lyvA0X2DkqFWKQTlvjVMlkpo9SbNsUECYo4Vhdg2RTWBt3L15iFlOcwyeaiA+QwdaAVtVwdgkx898kayFGPMFcsGGU9SHXz5n+QJs0XpdBdDLvNLEqVC+YWV+pwDKemKDBCGurfbjdAdXzyoMQjZCzU1QDsvn5P/RWsL3epFWdHAsBmLvQ+0TsXgUkwCNuOtsJ911xKO4t0K6j0I6EAdiKI4ET4HEKnaJS1kiVW/afFs4EmPs7Or+yaY2M5BxagK8dcs2OaliS0LJpnQQhWRBpvVwGHmnFJttKaUaAto1tJWwNTXW0xgnKcBoeYoH7Zm9AO/MmLjLxNMjJVCbLyOEOYSNFfIVSGdKcFF39v5c3Jzkvbw/uvx5mo96xyd5r/jb2QDm+pOQ8nmQZEjEWIMOUHsGIdcFGeBXgsiy/fCJ9eHXehcogarGI7FOhItvSqmQ6GVQq1ev+9Hb2WYz3qUaZOPSBElWGFbXpd2CQMAQ1UqxEsRX7N76T896x+fFroXr/Lxb9PPr5V7sKN92+z9G/ePuZb/IskGXIhvnhtmtIYbq5EHXyTHKFCHsswkT4H8BAAD//5yxbXI7BAAA



- path: /etc/apt/apt.conf.d/99periodic
  permissions: "0644"
  owner: root
  content: |
    APT::Periodic::Update-Package-Lists "0";
    APT::Periodic::Download-Upgradeable-Packages "0";
    APT::Periodic::AutocleanInterval "0";
    APT::Periodic::Unattended-Upgrade "0";








- path: /etc/containerd/config.toml
  permissions: "0644"
  owner: root
  content: |
    version = 2
    subreaper = false
    oom_score = 0
    [plugins."io.containerd.grpc.v1.cri"]
        sandbox_image = "oss/kubernetes/pause:1.3.1"
        [plugins."io.containerd.grpc.v1.cri".containerd]
            
            [plugins."io.containerd.grpc.v1.cri".containerd.untrusted_workload_runtime]
                runtime_type = "io.containerd.runtime.v1.linux"
                runtime_engine = "/usr/bin/nvidia-container-runtime"
            [plugins."io.containerd.grpc.v1.cri".containerd.default_runtime]
                runtime_type = "io.containerd.runtime.v1.linux"
                runtime_engine = "/usr/bin/nvidia-container-runtime"
    
    [plugins."io.containerd.grpc.v1.cri".registry.headers]
      X-Meta-Source-Client = ["azure/aks"]
    [metrics]
    address = "127.0.0.1:10257"
    
    #EOF

- path: /etc/containerd/kubenet_template.conf
  permissions: "0644"
  owner: root
  content: |
      {
          "cniVersion": "0.3.1",
          "name": "kubenet",
          "plugins": [{
            "type": "bridge",
            "bridge": "cbr0",
            "mtu": 1500,
            "addIf": "eth0",
            "isGateway": true,
            "ipMasq": true,
            "promisMode": true,
            "hairpinMode": false,
            "ipam": {
                "type": "host-local",
                "subnet": "{{.PodCIDR}}",
                "routes": [{ "dst": "0.0.0.0/0" }]
            }
          }]
      }

- path: /etc/systemd/system/containerd.service
  permissions: "0644"
  owner: root
  content: |
    [Unit]
    Description=containerd daemon
    After=network.target

    [Service]
    ExecStartPre=/sbin/modprobe overlay
    ExecStart=/usr/bin/containerd
    Delegate=yes
    KillMode=process
    OOMScoreAdjust=-999
    LimitNOFILE=1048576
    LimitNPROC=infinity
    LimitCORE=infinity

    [Install]
    WantedBy=multi-user.target

    #EOF

- path: /etc/systemd/system/containerd.service.d/exec_start.conf
  permissions: "0644"
  owner: root
  content: |
    [Service]
    ExecStartPost=/sbin/iptables -P FORWARD ACCEPT
    #EOF

- path: /etc/crictl.yaml
  permissions: "0644"
  owner: root
  content: |
    runtime-endpoint: unix:///run/containerd/containerd.sock
    #EOF

- path: /etc/sysctl.d/11-containerd.conf
  permissions: "0644"
  owner: root
  content: |
    net.ipv4.ip_forward = 1
    net.ipv4.conf.all.forwarding = 1
    net.bridge.bridge-nf-call-iptables = 1
    #EOF





- path: /etc/systemd/system/nvidia-modprobe.service
  permissions: "0644"
  owner: root
  content: |
    [Unit]
    Description=Installs and loads Nvidia GPU kernel module
    [Service]
    Type=oneshot
    RemainAfterExit=true
    ExecStartPre=/bin/sh -c "dkms autoinstall --verbose"
    ExecStart=/bin/sh -c "nvidia-modprobe -u -c0"
    ExecStartPost=/bin/sh -c "sleep 10 && systemctl restart kubelet"
    [Install]
    WantedBy=multi-user.target


- path: /etc/kubernetes/certs/ca.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    

- path: /etc/kubernetes/certs/client.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    



- path: /var/lib/kubelet/kubeconfig
  permissions: "0644"
  owner: root
  content: |
    apiVersion: v1
    kind: Config
    clusters:
    - name: localcluster
      cluster:
        certificate-authority: /etc/kubernetes/certs/ca.crt
        server: https://:443
    users:
    - name: client
      user:
        client-certificate: /etc/kubernetes/certs/client.crt
        client-key: /etc/kubernetes/certs/client.key
    contexts:
    - context:
        cluster: localcluster
        user: client
      name: localclustercontext
    current-context: localclustercontext
    #EOF

- path: /etc/default/kubelet
  permissions: "0644"
  owner: root
  content: |
    KUBELET_FLAGS=
    KUBELET_REGISTER_SCHEDULABLE=true
    NETWORK_POLICY=
    KUBELET_IMAGE=hyperkube-amd64:v1.15.7


    KUBELET_NODE_LABELS=kubernetes.azure.com/role=agent,node-role.kubernetes.io/agent=,kubernetes.io/role=agent,agentpool=agent2,storageprofile=managed,storagetier=Standard_LRS,accelerator=nvidia,kubernetes.azure.com/cluster=resourceGroupName

    #EOF

- path: /opt/azure/containers/kubelet.sh
  permissions: "0755"
  owner: root
  content: |
    #!/bin/bash

    


    # Disallow container from reaching out to the special IP address 168.63.129.16
    # for TCP protocol (which http uses)
    #
    # 168.63.129.16 contains protected settings that have priviledged info.
    #
    # The host can still reach 168.63.129.16 because it goes through the OUTPUT chain, not FORWARD.
    #
    # Note: we should not block all traffic to 168.63.129.16. For example UDP traffic is still needed
    # for DNS.
    iptables -I FORWARD -d 168.63.129.16 -p tcp --dport 80 -j DROP
    #EOF

- path: /etc/sysctl.d/999-sysctl-aks.conf
  permissions: "0644"
  owner: root
  content: |
    # This is a partial workaround to this upstream Kubernetes issue:
    # https://github.com/kubernetes/kubernetes/issues/41916#issuecomment-312428731
    net.ipv4.tcp_retries2=8
    net.core.message_burst=80
    net.core.message_cost=40
    net.core.somaxconn=16384
    net.ipv4.tcp_max_syn_backlog=16384
    net.ipv4.neigh.default.gc_thresh1=4096
    net.ipv4.neigh.default.gc_thresh2=8192
    net.ipv4.neigh.default.gc_thresh3=16384

    #EOF

runcmd:
- set -x
- . /opt/azure/containers/provision_source.sh
- aptmarkWALinuxAgent hold
