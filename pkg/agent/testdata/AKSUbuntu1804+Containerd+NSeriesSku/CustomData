#cloud-config

write_files:
- path: /opt/azure/containers/provision_source.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision_start.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/5SPTUvzQBSF9/kVhzC8baHzjh+7QuuiBqmLRmwKLoQynV6SaMyNMzelfv13qaIVlKJ3ex7uOY9ZlrVZ2lDAcCPGPraejONabFmTD6bxvC5DyfX/UGA0gllbbyrOP8iqDUJe77CKcxyN/h1GydUkW4zT02SoTqLwEITunFTQumbd2Jw8dIUgVtqA23ZJFclvCrQLpLmVppVdVzrPLubZUHWdlT9/eEZBdgVd4/igF53P0ulill1OpmdD1cXN/Ta4jvDttLY+BznE6lM13kNyg1i9D92HkUf8c955SjaljHlFAyhyfaRvDgMobvpIvGe/DfxLB72IXMFQX2Qi2pSC3dTXAAAA//9qyXjA+QEAAA==

- path: /opt/azure/containers/provision.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision_installs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision_configs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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







- path: /usr/local/bin/configure_azure0.sh
  permissions: "0544"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/6SU0W/bNhDG3/lXfJGFqsVmyR720CQQBsF2N6ONEsTZiiFwDVqiLM4KqZJUPNf2/z5QchS5W7ZhexN0d9/9+N2RvbOg0ipYchEw8Ygl1TkhPUyNpyFFsYVgCdOaqi2MRCJFxleVYqBfKsUG4AI/LythKgzf+oPvSaGXC8UKRjVDn2MPulmj/8678ODtSsWFgfvdwWv+ezt3GLrDSxwDw4OHPVaKleh/5nA+VbW06xCe4R7uDzgLMcD8EiZnggAAS3IJb2rANYQ0TzCzNS9bWC5WR1yvqfmdGwxIxskprvo/uHA+1Q78B9i6zv/XzD2McpaswTOr3GQhEfxYa8VNzhTzfR9CQjCW2tGpSsDkXEMnipfGlgtpSA9RoSVSKTyDDRXmJHeTM1GjVrol6ieCk3ucoZ8hYCYJEsEDwYyfBsNBv07xLUrBtcEcr149wVvyeArD6AMemDBcCotKTdPraIrlZSkyqZDQgif2BGYj1RqlLHiy/YuzkNpYJz7Ju4C7iyd3H69v3y9urj9MR78emtHcw/lzBGEIp+nnYH4ytL93foCl4umKWXxaKEbT7fMtSUkPH9nR3O4geAYtfcJLFFysoXO5eZLr+KUqsSiLasXF6zfYHWlKqYz1cTG6vrqK4nHoDutIQs0/j2OP3z7D8wV9YKAabv2xh58I/gtTmktR/348fu/hN/31/fybEDubftFUfYvnmou24tAtGczt/QhkaWom+8Q0C/QomCEHQjqHiW5/nIXe+7ezxc31eBFHV5PZTTSahCnLaFWYy24kbP2NrNwonnrkxJf4LprGk9vpODw/Pz/vxuLJXTwLA1UJa5HQQStFv9i17qRO39W9mMm/FrmJ7n4Ku8cidpC1Hmiawn29pJrV1rq7tuvhTWeeiMZj0j4U/ZX56qVo9VJWwHlJ0Hle0GG9oJ0G48kHcqLyItUfAQAA//+8Xj4iAgYAAA==

- path: /etc/systemd/system/kubelet.service
  permissions: "0644"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/4yTT08bMRDF7/sprIhDezCG/rkU+QBloRERRWwQhxBFXu8kGcU73trjEFr63atNCJAQpO5pd/x+783a48ENIQ+zU4g2YMPoSV+kEhxw9t1ThW3lyvA0X2DkqFWKQTlvjVMlkpo9SbNsUECYo4Vhdg2RTWBt3L15iFlOcwyeaiA+QwdaAVtVwdgkx898kayFGPMFcsGGU9SHXz5n+QJs0XpdBdDLvNLEqVC+YWV+pwDKemKDBCGurfbjdAdXzyoMQjZCzU1QDsvn5P/RWsL3epFWdHAsBmLvQ+0TsXgUkwCNuOtsJ911xKO4t0K6j0I6EAdiKI4ET4HEKnaJS1kiVW/afFs4EmPs7Or+yaY2M5BxagK8dcs2OaliS0LJpnQQhWRBpvVwGHmnFJttKaUaAto1tJWwNTXW0xgnKcBoeYoH7Zm9AO/MmLjLxNMjJVCbLyOEOYSNFfIVSGdKcFF39v5c3Jzkvbw/uvx5mo96xyd5r/jb2QDm+pOQ8nmQZEjEWIMOUHsGIdcFGeBXgsiy/fCJ9eHXehcogarGI7FOhItvSqmQ6GVQq1ev+9Hb2WYz3qUaZOPSBElWGFbXpd2CQMAQ1UqxEsRX7N76T896x+fFroXr/Lxb9PPr5V7sKN92+z9G/ePuZb/IskGXIhvnhtmtIYbq5EHXyTHKFCHsswkT4H8BAAD//5yxbXI7BAAA



- path: /etc/apt/apt.conf.d/99periodic
  permissions: "0644"
  owner: root
  content: |
    APT::Periodic::Update-Package-Lists "0";
    APT::Periodic::Download-Upgradeable-Packages "0";
    APT::Periodic::AutocleanInterval "0";
    APT::Periodic::Unattended-Upgrade "0";








- path: /etc/containerd/config.toml
  permissions: "0644"
  owner: root
  content: |
    version = 2
    subreaper = false
    oom_score = 0
    [plugins."io.containerd.grpc.v1.cri"]
      sandbox_image = "oss/kubernetes/pause:1.3.1"
      [plugins."io.containerd.grpc.v1.cri".containerd]
        
        [plugins."io.containerd.grpc.v1.cri".containerd.untrusted_workload_runtime]
          runtime_type = "io.containerd.runc.v2"
          runtime_engine = "/usr/bin/nvidia-container-runtime"
        [plugins."io.containerd.grpc.v1.cri".containerd.default_runtime]
          runtime_type = "io.containerd.runc.v2"
          runtime_engine = "/usr/bin/nvidia-container-runtime"
      
      [plugins."io.containerd.grpc.v1.cri".registry.headers]
        X-Meta-Source-Client = ["azure/aks"]
    [metrics]
      address = "127.0.0.1:10257"
    
    #EOF

- path: /etc/containerd/kubenet_template.conf
  permissions: "0644"
  owner: root
  content: |
      {
          "cniVersion": "0.3.1",
          "name": "kubenet",
          "plugins": [{
            "type": "bridge",
            "bridge": "cbr0",
            "mtu": 1500,
            "addIf": "eth0",
            "isGateway": true,
            "ipMasq": true,
            "promisMode": true,
            "hairpinMode": false,
            "ipam": {
                "type": "host-local",
                "subnet": "{{.PodCIDR}}",
                "routes": [{ "dst": "0.0.0.0/0" }]
            }
          }]
      }

- path: /etc/systemd/system/containerd.service
  permissions: "0644"
  owner: root
  content: |
    [Unit]
    Description=containerd daemon
    After=network.target

    [Service]
    ExecStartPre=/sbin/modprobe overlay
    ExecStart=/usr/bin/containerd
    Delegate=yes
    KillMode=process
    Restart=always
    OOMScoreAdjust=-999
    LimitNOFILE=1048576
    LimitNPROC=infinity
    LimitCORE=infinity

    [Install]
    WantedBy=multi-user.target

    #EOF

- path: /etc/systemd/system/containerd.service.d/exec_start.conf
  permissions: "0644"
  owner: root
  content: |
    [Service]
    ExecStartPost=/sbin/iptables -P FORWARD ACCEPT
    #EOF

- path: /etc/crictl.yaml
  permissions: "0644"
  owner: root
  content: |
    runtime-endpoint: unix:///run/containerd/containerd.sock
    #EOF

- path: /etc/sysctl.d/11-containerd.conf
  permissions: "0644"
  owner: root
  content: |
    net.ipv4.ip_forward = 1
    net.ipv4.conf.all.forwarding = 1
    net.bridge.bridge-nf-call-iptables = 1
    #EOF





- path: /etc/systemd/system/nvidia-modprobe.service
  permissions: "0644"
  owner: root
  content: |
    [Unit]
    Description=Installs and loads Nvidia GPU kernel module
    [Service]
    Type=oneshot
    RemainAfterExit=true
    ExecStartPre=/bin/sh -c "dkms autoinstall --verbose"
    ExecStart=/bin/sh -c "nvidia-modprobe -u -c0"
    ExecStartPost=/bin/sh -c "sleep 10 && systemctl restart kubelet"
    [Install]
    WantedBy=multi-user.target


- path: /etc/kubernetes/certs/ca.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    

- path: /etc/kubernetes/certs/client.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    



- path: /var/lib/kubelet/kubeconfig
  permissions: "0644"
  owner: root
  content: |
    apiVersion: v1
    kind: Config
    clusters:
    - name: localcluster
      cluster:
        certificate-authority: /etc/kubernetes/certs/ca.crt
        server: https://:443
    users:
    - name: client
      user:
        client-certificate: /etc/kubernetes/certs/client.crt
        client-key: /etc/kubernetes/certs/client.key
    contexts:
    - context:
        cluster: localcluster
        user: client
      name: localclustercontext
    current-context: localclustercontext
    #EOF

- path: /etc/default/kubelet
  permissions: "0644"
  owner: root
  content: |
    KUBELET_FLAGS=
    KUBELET_REGISTER_SCHEDULABLE=true
    NETWORK_POLICY=
    KUBELET_IMAGE=hyperkube-amd64:v1.15.7


    KUBELET_NODE_LABELS=kubernetes.azure.com/role=agent,node-role.kubernetes.io/agent=,kubernetes.io/role=agent,agentpool=agent2,storageprofile=managed,storagetier=Standard_LRS,accelerator=nvidia,kubernetes.azure.com/cluster=resourceGroupName

    #EOF

- path: /opt/azure/containers/kubelet.sh
  permissions: "0755"
  owner: root
  content: |
    #!/bin/bash

    


    # Disallow container from reaching out to the special IP address 168.63.129.16
    # for TCP protocol (which http uses)
    #
    # 168.63.129.16 contains protected settings that have priviledged info.
    #
    # The host can still reach 168.63.129.16 because it goes through the OUTPUT chain, not FORWARD.
    #
    # Note: we should not block all traffic to 168.63.129.16. For example UDP traffic is still needed
    # for DNS.
    iptables -I FORWARD -d 168.63.129.16 -p tcp --dport 80 -j DROP
    #EOF

- path: /etc/sysctl.d/999-sysctl-aks.conf
  permissions: "0644"
  owner: root
  content: |
    # This is a partial workaround to this upstream Kubernetes issue:
    # https://github.com/kubernetes/kubernetes/issues/41916#issuecomment-312428731
    net.ipv4.tcp_retries2=8
    net.core.message_burst=80
    net.core.message_cost=40
    net.core.somaxconn=16384
    net.ipv4.tcp_max_syn_backlog=16384
    net.ipv4.neigh.default.gc_thresh1=4096
    net.ipv4.neigh.default.gc_thresh2=8192
    net.ipv4.neigh.default.gc_thresh3=16384

    #EOF

runcmd:
- set -x
- . /opt/azure/containers/provision_source.sh
- aptmarkWALinuxAgent hold
