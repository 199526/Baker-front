#cloud-config

write_files:
- path: /opt/azure/containers/provision_source.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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



- path: /opt/azure/containers/provision_source_distro.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/9yW32/bNhDH3/VXXFXCtYsyqlPkxYaLeoi6FQgcIG2RAUkm0NJJIiyTKn8kKer87wNpVbZje3G2h2HLU0R+78z73oc6vXwRTbmIpkyXQYBpKSH8LK1KuSgg1ZiUWNWodJJxbZQ80iXkUsHXqRXGhkEQsNrMmZpdjs+4sPfjAoXp9uBHAADg05Fuxgz23pBuKbURbI69N6ANU2a8HQoh6Yc+9o5xk+RSJaw2SSXTmfbLCo36ns6zhOdJznhlFUL/+C2cwPEJsNpQlxFIH+5Y5bIyn3WxgGsfznO4uvI/AqMRhKWsshBuboZgShRe4c99zw2Q+OIi+e387DS5HJ99mnz9ffxrPPmyrKt6lMeKJzNdxGfx+HO8J2POnzAMRbbXrocg2HarbcJdySuE3GpUEN0yFVV8GmX1rIicbrXEahNVXBu9tp6ytES/w1Ra8ltsNt9HGd5GwlYVHL/v9IeQyVXJroZXl4wbh5CDRWGFTCPI3HUI/PFetXpdIdbwzj9nUmDw4JhKCjSJrZ0TbSWu9xz1qP/WPzrVUpFIa2prRpGZ1+60tEBDl1tH0pqlw1IBBy6AdDV+gz6QJl1v4/R7sFv2spbKwGn8y6fxJPl4cT75Ek9OR0IKLgwqlhp+i63aOQyUplLkvHCUUgaU5lKl6BczzFttc2SgOdDvwIU2rKra3RfQ/SlY1uQ9hwUYRCBbLsACCoU10BjCP7pXl/HN4Oh1b9G9wvhGqaPXPRL2oNNpLoT7S5nZlafTgalCNlvdnv3idttdDCAcKH5rHYbHt6JpplUC+it7K40NDCftYnMvPBctXPE9ptZgBo9sIRwMn6Pe9/5YgdVYvEUW6Q+Xgf4cI3I89BmlNSPybgi65Ln3ZfOf/wxfTdlAJZzWs2IwOK8Nl0IPBqNwPda/yygVkjYRVGEq53MUmXaEkh8fHvbg8c/6v6FYskBW/djY3XxHPBOY1oj9NV6H5MN12DI1fBqq2qpi+2X1P0fKF30gUP8+OIfR0dT0dxhwX0mJrQvFsp8obEwtp1vX7JxcTkAbQTO/DkBhDwaHI3Bo+/dPq/b7S5fyzn0R+dW1+bVemQt+PMh2WPO8cdZOp12ZtsH7K3lwIJUbPG4NMU9cw9tu2jY8WRthOzl7GZ9/DP4MAAD//wot+8SzCwAA


- path: /opt/azure/containers/provision_start.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/5SQ34/SQBzE3/evmGxWaSNfC/p2CZgLNAYTqYGS3IMJWbZfoVq7dX9cUM//3QCeXNQQr0/dndn5ZCbb1G220X6HzHYh09+i48zYNui6Zeezztnb2te2fe53GI+R3WqXNXZ772yiD+zobGvsFi/GT4civ5mV60kxzUfqlfBffeDPJjQgai11essO1MAHHaLHp7jhhsP/AMh4JhtDF8OZVazKd6typJId6wpk8HIwGEA+MkumYlleL8p1OXubj1TCZmch1Slc4g4mBlCFXr8H+gAa4g4n4DAV+U0+WZWzYr6erhbXh5/7BJUkKql0YDx74lMQfp2oglRnoDzKaZoK8WZZzNfLcjGbvx6pBB+/gFq8F/jrI9JuCzaQ6vfc8oLTdg/6XAh0kBf16gj8s/C/n/S+5/s6TGzFV1Bs+iiOg19B2a6P3DnrDoLrI9+zmUanQ23bw1X1o4dUnDZ8MIngfR1wLvwzAAD//3J4YiDDAgAA

- path: /opt/azure/containers/provision.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision_installs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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


- path: /opt/azure/containers/provision_installs_distro.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/8Q6627bRpf/9RTnk42t3ZaUKDveNP1cQLEUV6hjC5KcNugWxGh4SE1EzrAzQ1+S+MO+xr7ePsniDEndncRN8a0RJA5nzv1+yL1/tKZCtqbMzBoN5DMFzbEqNBcyAW4wFNJYlqZhJIzVyjcziJWG62khbdFsNDRm6gZfq+n9wSF8aAAA3DJhw1jpkOU2TBWfG/dYo9X3PItCEYcxE2mhEYI2PIOTNrDceglayAudIHj3kKnpvYcyERLL33kqGg81uTMlLRMSdfT3E+UL3ESvkr6HuVmQ2oEzlCo0llkDQYewd54BL3QKXmzGFzCzNjcvWq2c8TlL0PiZ4FoZFVufq6zFlYxF0iqcSlv7H65fXl9OrsNR/6LfHfcfFmDeAszLtYr8CKfwE7Rsln/yysePgHfCwn5/NApfj8Ph6KoX9vovw97Vr5cXV91eOBm87l9dTx5V2AmJFLQhyucJeOIrSA5/OQ+7vV74qju4cORYbjOm5792L4Qs7roJSgszlUb1YZigDYs8YhbXsXaHk/B62OtO+mvs1yDkrWGRJ5pFOwB7gzFBn4+6vXVwcm1CUQkHQgLLGZ9hxyusSI3zGauZNLnS1nOGhWmqpnFh8DTwAz8AzjyO2opYcGbRAMd85nGVZUoCT7Qqci8VFoGL2FRYuZLSasbnwOnvVEw9XUgrMgScWjZN0QDamVUqBaIEibCQpIWxqGNDseH0ZlUOInZ/S2E9c28sZt4M0xy1AaHcSa5VYbEDIjdoQeQV+nd/QiqmOcu8/PbPgqXC3rsH9X88Im4gU4W0IIloKVEukvdgFGcWzL2JTSmQuTcUDkBCoSMIdOClZGW4e1/J/V7kP0KknOoBRAz/WBiwCjw4akMAJ+027K/Y5UewM5QVGMA7VWjJUm5T8DypvJwlqMEr1mAWt9ddYXA5nnQvLta8ACAW7pdISVzJAufD654WN6iXuSCbR0KDl8P++fA67PXHEwqOr0sT8kZEgvmJsLNi6gtVPfAixeeoW0mezPEeflon2WK5rQHzZN3l3b3R4E1/NN4p71NyZ803BQKxwaLo/4ORv0WTZcbdTrhrt/xUGLul7R1Xakn/HaIy+3l+foIWWk7maBkq6Gjccz/6eubXE/OjznJE7B5R8Nalto5qj5KLLO68GbIItfH2DwrJMgRPH0LCOWRsjhDNM/M0B3qUi5N27R8X44V7FMaP1K1MFYv8ylWoHls0KWuV+n3Tunwz6A26nqtP3t3zk/Dk2Nv/UB4++LqQ4CmoHvTHk6X3lJliefdpktgs7wl9up1WXJY8qPIUpXAPiYNc5EgSVwc8gub+hxLJQ7N6+GU2qlUCa27SOW3ufyh1Efauzn7pj0LifXB1+fDd5sH4+tWrwW8PzadJfLiW1b8cLhYrKXp8/ttmii572kF5Tl3t+Pw3KK1TKiZVnKVQSeOeVL+f7h8kGnOgdmE0eFkniDKuvvU0psgMfgReWPBi6IAXQfO0eehwcGYQ9itMIEq5msFzv31c3aCf8flvlXDh9ejitFm75sIv24GvdNIS0mLqmeSuFXGWe4HfabkAcv+tiyVqU+W0Meob1I5YyyR3obsb3p0ch6XgYeAHnZAHQbsddPypkM0FRz/+WHF68u/k9OQrOP12hcvS2G9QG6HkivoNSGXBFDn1bRg117uBYBMnGsYbK84x7J790j3vj0+bLjFRhqLk1Hxq+dyONu9+kRT3ayqwHjhLzW8HwAqPy2uNdXud7h9MmUGXX/fXzXi4An/VD3uD0WlL5bbF3hcaW4tRyLQUbrQ7H8rrD43PtworhXn/wzr9hzJ5Vrhaq8cPX64EF26zTEXAvrt7DJ279WRS40l3NCnHlYdGo6x33dz+KuzsdT33DOfJX5kNv3YqpGGrLvTUAmzMYWtlvRzErl6+dT3vBY0/nyubQTX08fxx9I81GF9B9y9qa473ZsmizwyHj0D9p+dFyHSm9JaattvT1+PwfHge/tJ/++Wz8aNqcugXCrKahrWIHm7r5zNknzgGPzQakTA01V3avCujicjQ3EseVSXwbKaVXG5r9qBX3oZyXow8WwO48/Ipt2loaH7stN1I1mlvX9+IosnVMLwa0azdfXnRD8dvx5P+61Ky8dvLs3UZF1Qgeoybr0G/FFLa/NNiSZt/mtLlZPgZ1p+EouKvMg5wZ52vXX/UJWUpVol3HcnZz6Ory7e70ylbDBAlZPWPT2kJ/vnP/tWrxh78iilXGYJV1LrVNMrMVWhmqQbHIkUfxlgfOwwHzw7driVTGht7IGSsdFbeZ1NVWChM4VQZCY3cihs0fqOxB5OZMHAr0hQKg3BQ5GDV4YvGHnhwDFUSglirjGzgl7mT8gPczgSfgSFmmUYQ+c0JoCQSkYPurEN3athcqdQnXEonFRJh1sCBGbjFNHVoggpNieX3dvDHTkTI+AwORH5zDEqm98BsdlhLlyGTBqb3EGHMitR+D05KOIGoYKlnLONzYDKqHndoAhekOZbCYHhz7BHGxt5CHqetKZLCIr+xB13rbGWoG3AbJmEpsTEhTamfXCtLOidbJPTYgpIIKnZwKK0WaGCKQiaNPTctwAFXWU56tQreFYbMR432ClgqJJrD0g8OLoYvYC/4z2fHR8+el35gZ+QGkTC8MNS5+Y09YrVyBcJlXJ9YmYcwXk6GMFQqhaFW75DTbAkJStQsBbOk0j5+1nl26ATPc61uMCLdlutrmCCfSUHNz0vFdARKQqcdBF6747WfEwyxS5XnRat1e3u7ZsTWOyWkP7NZuvDkVT/2G3t0e9MPqx8xLbSxkLG72kzH1f32TofZvh9U94Mn3t/t2dv3O4twW4QgmBy5iO9LgypexmtlYApzqBpGstegRzUZcibIaEo39pzFWEEznhW8UtIc7x3kjkxDJf0zTDhQIa2qQrOEjEqfN5ZMQtc0sxtZxm9EWsS2JH3DdCsV0w3y7gLRv5ZcZRnKMm5ilabqliQkl3aZr9ASUpUkpcv7jb1UJW7zOacnGTJTaCQEBqizEcYK7iS7UIkTwSy06TdSlVCLXTKlkoobuj2mOjVlEaCxInOr5SI3aK2jwviM+OE0f/iNjN2VVcPM8RaCdttv71BlmcEMzFFLTIGqLFETprTsAd6gvocggEzIwqI5rIzd2AONLHWluaIIl8qSspmlfMKZ/N///h9bpx1gqZIJ3Ao7czr8RltOcn+z5MVvaMuJASdpKZQBV1wo4l/Actzkm70fSq8w1chyI7SlNFnpw1SzJ3HqOfQaY8cxDH8+g1aEN63c5m3IVZrCEUTuX68DKo4NWmg3aN4zFnMI/DZ4QYMK33rZ7zstdmU0tkzbTxXacphY6dP2wJJF+Az5nOqKKqwREcIUOaMCVy81LJMR6XDlxRddZ6lRwGmcdklt8aYOc5QRSi7Q+GZGifHNzz14WYg0Qt1YWYqsoLupRuYyvESJcTRsNojLs3H/O0LBmYRIcMtsGVh8C/57Mrg2ECn5DfmBRqqPzvzMkGvcKj03jU8ItmhMz64uJ93BZX/UCxf7mKDqlpyxvWkhUgvVmxIDM3aDwKD5nTttginiWNyR+HaGQi9FtNp514HwEQL/2A9KiEMfyteLpR/PUKNfcnI9GvUvJ0s2DlYE92q01R4ogiY0wYvhCD4COf835uPNx4/frJx/586Dw0qYG8dDaX8NqbpFs7KqWLCt4hV9l6DChSMVHgNSrRyHNZCQeWHLojkaOuPAjOmIq2iJuV4r/v47eO9h/8O24h/gjz823rnssE4z8J/5bW+K1q3cjwLWjn/oRHGzXtPVhAxmN6jPqp5h/8OGfl94zbbf9tvNh93MbHBSujIvtEZp00UYYLTDPbeJPZDuEo3MIrUhTMKB0oB/Fiyl3hIs0wlamDKDq0i2ufLBzEWeUzL+hHf7pTIwNbghgFguKHfzvU1yucVavoXfeHS27jH08+gSY3FjDyZXvasXEAtqCqy+X+yEiTvnTIsMTCMHaMzdBCAhZmk6pQ7VKufNVIRZgoD5AnuNayX57JRuAfDIfu2TE/nGis2Ll1u2VVq9/svw1eCiv7EBWrmx+/0ggM7AG8Wwv4qsGt7HYW8wgv9YUacuJAfNfziCGTPAQGOi0TW6Zapx2d5AriJDipsiGFtQSZBLX+Dko3W0lmjrmli936JaqHKUK2s7ItwSxhRoWp3nJ88WwI8Piu4jCII7DSgI/6X5D51vwfMY9T0eGc+9VN94MTO6vjz7xHZ+2+ZflOaXQV3kxmpkGWRMyHJYoQJUv6enWWXpazLKlZCW+r5ZHdX0h1NrsHDYTeqL3cvaepvUwbQVMePW+K5OYJSgL9G6s9bGRyOtnb5cFpjWVCgpeNmThCyLTo43wcNd4C2v9V//qnB4QQnoRzhtbuxkH/PFLUn7L8PJ6+HpeiisiL+3923rYX3lxQudhq5fLvdyJ21oPkqwtRVkk9fDhyY8SvDx+Nu5EdsRwadP5mblrdHa50vb1b58AxaBt1Lr3YuhZs+d1Fm6uVLjvy9r/M6uYGcfUC7h3a50WVB/8NtHfnDc/CuVcxXVl9dM54/Rmlh/V9FcY2i7XJIRdpXHHbXt8yXM0Tq7GJxukF1cKPudZnV8djF4aMLpKTSP/LZ/3Nzud9aQultHy/JbfS7yBYm1/KRtk6tvF9+4na4w9Pms664+nnV5ikxe5zs+W6mrV/12efEwfsJHA26CoXno/wIAAP//moLYEUMoAAA=


- path: /opt/azure/containers/provision_configs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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





- path: /etc/systemd/system/kubelet.service
  permissions: "0644"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/4ySz0/bThDF7/4rRhGH7/ewbOmPS5EPUAyNiCjCQRxChNbrgYyynnV3Z0No6f9emRAgYKT6ZM++z5vn1ZucM8k0O8BoA7VCnvPjVKFDyb55rqmbnBqZFUuKEnOdYtDOW+N0Raznj9Ism5QYFmRxmp1hFBMkN+7W3MWs4AUFzw2yHJLDXKNYXeO1SU6e+DJZizEWS5JSjKSY73z+lBVLtGXndRowf9hXmTgD7VvR5lcKqK1nMcQY4tpqO856uGZeUwDVgl6YoB1VT5v/RWuZ3suiLAzoGiaw9V/jEwvcw03AFi4HrzddDuAebi0o9z8oh/ABprALMkOG1doHXKmKuH4T8+1gF65p0Jf+0aYxc1RxZgK+dcs2OaVjR2IlpnIYQQmw6TwcRemVUvtayqnBQHYNPVPvNAYuM3h8lELu3FTEsMCwccK+RuVMhS7mg63fx+f7xagYX538OCiuRnv7xaj8M9gAFvlHUOqpFiokFmowD9h4QVDrgQr4M2EU1X34JPnOl6YPVMh164klT0zLr1rrkPi5dvWL1+3o7XwzjHepQdW6dEOsagqr8ndXEBgFo14pVoL4gt1a/+nhaO+o7Ds4K46G5bg4e7iLnvHFcPz9arw3PBmXWTYZchTj3DS7MCxY79/lTXJCKkUM22LCDcrfAAAA//8PqjOJCQQAAA==




- path: /etc/apt/apt.conf.d/99periodic
  permissions: "0644"
  owner: root
  content: |
    APT::Periodic::Update-Package-Lists "0";
    APT::Periodic::Download-Upgradeable-Packages "0";
    APT::Periodic::AutocleanInterval "0";
    APT::Periodic::Unattended-Upgrade "0";







- path: /etc/containerd/config.toml
  permissions: "0644"
  owner: root
  content: |
    version = 2
    subreaper = false
    oom_score = 0
    [plugins."io.containerd.grpc.v1.cri"]
      sandbox_image = "oss/kubernetes/pause:1.3.1"
      [plugins."io.containerd.grpc.v1.cri".containerd]
        
        [plugins."io.containerd.grpc.v1.cri".containerd.untrusted_workload_runtime]
          runtime_type = "io.containerd.runtime.v1.linux"
          runtime_engine = "/usr/bin/runc"
        [plugins."io.containerd.grpc.v1.cri".containerd.default_runtime]
          runtime_type = "io.containerd.runtime.v1.linux"
          runtime_engine = "/usr/bin/runc"
      
      [plugins."io.containerd.grpc.v1.cri".registry.headers]
        X-Meta-Source-Client = ["azure/aks"]
    [metrics]
      address = "127.0.0.1:10257"
    
    #EOF

- path: /etc/containerd/kubenet_template.conf
  permissions: "0644"
  owner: root
  content: |
      {
          "cniVersion": "0.3.1",
          "name": "kubenet",
          "plugins": [{
            "type": "bridge",
            "bridge": "cbr0",
            "mtu": 1500,
            "addIf": "eth0",
            "isGateway": true,
            "ipMasq": true,
            "promiscMode": true,
            "hairpinMode": false,
            "ipam": {
                "type": "host-local",
                "subnet": "{{.PodCIDR}}",
                "routes": [{ "dst": "0.0.0.0/0" }]
            }
          },
          {
            "type": "portmap",
            "capabilities": {"portMappings": true},
            "externalSetMarkChain": "KUBE-MARK-MASQ"
          }]
      }

- path: /etc/systemd/system/containerd.service
  permissions: "0644"
  owner: root
  content: |
    [Unit]
    Description=containerd daemon
    After=network.target

    [Service]
    ExecStartPre=/sbin/modprobe overlay
    ExecStart=/usr/bin/containerd
    Delegate=yes
    KillMode=process
    Restart=always
    OOMScoreAdjust=-999
    LimitNOFILE=1048576
    LimitNPROC=infinity
    LimitCORE=infinity

    [Install]
    WantedBy=multi-user.target

    #EOF

- path: /etc/systemd/system/containerd.service.d/exec_start.conf
  permissions: "0644"
  owner: root
  content: |
    [Service]
    ExecStartPost=/sbin/iptables -P FORWARD ACCEPT
    #EOF

- path: /etc/crictl.yaml
  permissions: "0644"
  owner: root
  content: |
    runtime-endpoint: unix:///run/containerd/containerd.sock
    #EOF

- path: /etc/sysctl.d/11-containerd.conf
  permissions: "0644"
  owner: root
  content: |
    net.ipv4.ip_forward = 1
    net.ipv4.conf.all.forwarding = 1
    net.bridge.bridge-nf-call-iptables = 1
    #EOF






- path: /etc/kubernetes/certs/ca.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    

- path: /etc/kubernetes/certs/client.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    



- path: /var/lib/kubelet/kubeconfig
  permissions: "0644"
  owner: root
  content: |
    apiVersion: v1
    kind: Config
    clusters:
    - name: localcluster
      cluster:
        certificate-authority: /etc/kubernetes/certs/ca.crt
        server: https://:443
    users:
    - name: client
      user:
        client-certificate: /etc/kubernetes/certs/client.crt
        client-key: /etc/kubernetes/certs/client.key
    contexts:
    - context:
        cluster: localcluster
        user: client
      name: localclustercontext
    current-context: localclustercontext
    #EOF

- path: /etc/default/kubelet
  permissions: "0644"
  owner: root
  content: |
    KUBELET_FLAGS=
    KUBELET_REGISTER_SCHEDULABLE=true
    NETWORK_POLICY=

    KUBELET_NODE_LABELS=kubernetes.azure.com/role=agent,agentpool=agent2,storageprofile=managed,storagetier=Premium_LRS,kubernetes.azure.com/cluster=resourceGroupName

    #EOF

- path: /opt/azure/containers/kubelet.sh
  permissions: "0755"
  owner: root
  content: |
    #!/bin/bash

    


    # Disallow container from reaching out to the special IP address 168.63.129.16
    # for TCP protocol (which http uses)
    #
    # 168.63.129.16 contains protected settings that have priviledged info.
    #
    # The host can still reach 168.63.129.16 because it goes through the OUTPUT chain, not FORWARD.
    #
    # Note: we should not block all traffic to 168.63.129.16. For example UDP traffic is still needed
    # for DNS.
    iptables -I FORWARD -d 168.63.129.16 -p tcp --dport 80 -j DROP
    #EOF

- path: /etc/sysctl.d/999-sysctl-aks.conf
  permissions: "0644"
  owner: root
  content: |
    # This is a partial workaround to this upstream Kubernetes issue:
    # https://github.com/kubernetes/kubernetes/issues/41916#issuecomment-312428731
    net.ipv4.tcp_retries2=8
    net.core.message_burst=80
    net.core.message_cost=40
    net.core.somaxconn=16384
    net.ipv4.tcp_max_syn_backlog=16384
    net.ipv4.neigh.default.gc_thresh1=4096
    net.ipv4.neigh.default.gc_thresh2=8192
    net.ipv4.neigh.default.gc_thresh3=16384

    #EOF

runcmd:
- set -x
- . /opt/azure/containers/provision_source.sh
- . /opt/azure/containers/provision_source_distro.sh
- aptmarkWALinuxAgent hold
