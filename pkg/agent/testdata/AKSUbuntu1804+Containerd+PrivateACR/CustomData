#cloud-config

write_files:
- path: /opt/azure/containers/provision_source.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision_installs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision_configs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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







- path: /usr/local/bin/configure_azure0.sh
  permissions: "0544"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/6SU0W/bNhDG3/lXfJGFqsVmyR720CQQBsF2N6ONEsTZiiFwDVqiLM4KqZJUPNf2/z5QchS5W7ZhexN0d9/9+N2RvbOg0ipYchEw8Ygl1TkhPUyNpyFFsYVgCdOaqi2MRCJFxleVYqBfKsUG4AI/LythKgzf+oPvSaGXC8UKRjVDn2MPulmj/8678ODtSsWFgfvdwWv+ezt3GLrDSxwDw4OHPVaKleh/5nA+VbW06xCe4R7uDzgLMcD8EiZnggAAS3IJb2rANYQ0TzCzNS9bWC5WR1yvqfmdGwxIxskprvo/uHA+1Q78B9i6zv/XzD2McpaswTOr3GQhEfxYa8VNzhTzfR9CQjCW2tGpSsDkXEMnipfGlgtpSA9RoSVSKTyDDRXmJHeTM1GjVrol6ieCk3ucoZ8hYCYJEsEDwYyfBsNBv07xLUrBtcEcr149wVvyeArD6AMemDBcCotKTdPraIrlZSkyqZDQgif2BGYj1RqlLHiy/YuzkNpYJz7Ju4C7iyd3H69v3y9urj9MR78emtHcw/lzBGEIp+nnYH4ytL93foCl4umKWXxaKEbT7fMtSUkPH9nR3O4geAYtfcJLFFysoXO5eZLr+KUqsSiLasXF6zfYHWlKqYz1cTG6vrqK4nHoDutIQs0/j2OP3z7D8wV9YKAabv2xh58I/gtTmktR/348fu/hN/31/fybEDubftFUfYvnmou24tAtGczt/QhkaWom+8Q0C/QomCEHQjqHiW5/nIXe+7ezxc31eBFHV5PZTTSahCnLaFWYy24kbP2NrNwonnrkxJf4LprGk9vpODw/Pz/vxuLJXTwLA1UJa5HQQStFv9i17qRO39W9mMm/FrmJ7n4Ku8cidpC1Hmiawn29pJrV1rq7tuvhTWeeiMZj0j4U/ZX56qVo9VJWwHlJ0Hle0GG9oJ0G48kHcqLyItUfAQAA//+8Xj4iAgYAAA==

- path: /etc/systemd/system/kubelet.service
  permissions: "0644"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/4yTT08bMRDF7/sprIhDezCG/rkU+QBloRERRWwQhxBFXu8kGcU73trjEFr63atNCJAQpO5pd/x+783a48ENIQ+zU4g2YMPoSV+kEhxw9t1ThW3lyvA0X2DkqFWKQTlvjVMlkpo9SbNsUECYo4Vhdg2RTWBt3L15iFlOcwyeaiA+QwdaAVtVwdgkx898kayFGPMFcsGGU9SHXz5n+QJs0XpdBdDLvNLEqVC+YWV+pwDKemKDBCGurfbjdAdXzyoMQjZCzU1QDsvn5P/RWsL3epFWdHAsBmLvQ+0TsXgUkwCNuOtsJ911xKO4t0K6j0I6EAdiKI4ET4HEKnaJS1kiVW/afFs4EmPs7Or+yaY2M5BxagK8dcs2OaliS0LJpnQQhWRBpvVwGHmnFJttKaUaAto1tJWwNTXW0xgnKcBoeYoH7Zm9AO/MmLjLxNMjJVCbLyOEOYSNFfIVSGdKcFF39v5c3Jzkvbw/uvx5mo96xyd5r/jb2QDm+pOQ8nmQZEjEWIMOUHsGIdcFGeBXgsiy/fCJ9eHXehcogarGI7FOhItvSqmQ6GVQq1ev+9Hb2WYz3qUaZOPSBElWGFbXpd2CQMAQ1UqxEsRX7N76T896x+fFroXr/Lxb9PPr5V7sKN92+z9G/ePuZb/IskGXIhvnhtmtIYbq5EHXyTHKFCHsswkT4H8BAAD//5yxbXI7BAAA



- path: /etc/apt/apt.conf.d/99periodic
  permissions: "0644"
  owner: root
  content: |
    APT::Periodic::Update-Package-Lists "0";
    APT::Periodic::Download-Upgradeable-Packages "0";
    APT::Periodic::AutocleanInterval "0";
    APT::Periodic::Unattended-Upgrade "0";








- path: /etc/containerd/config.toml
  permissions: "0644"
  owner: root
  content: |
    version = 2
    subreaper = false
    oom_score = 0
    [plugins."io.containerd.grpc.v1.cri"]
      sandbox_image = "oss/kubernetes/pause:1.3.1"
      [plugins."io.containerd.grpc.v1.cri".containerd]
        
        [plugins."io.containerd.grpc.v1.cri".containerd.untrusted_workload_runtime]
          runtime_type = "io.containerd.runtime.v1.linux"
          runtime_engine = "/usr/bin/runc"
        [plugins."io.containerd.grpc.v1.cri".containerd.default_runtime]
          runtime_type = "io.containerd.runtime.v1.linux"
          runtime_engine = "/usr/bin/runc"
      
      [plugins."io.containerd.grpc.v1.cri".registry.headers]
        X-Meta-Source-Client = ["azure/aks"]
    [metrics]
      address = "127.0.0.1:10257"
    
    #EOF

- path: /etc/containerd/kubenet_template.conf
  permissions: "0644"
  owner: root
  content: |
      {
          "cniVersion": "0.3.1",
          "name": "kubenet",
          "plugins": [{
            "type": "bridge",
            "bridge": "cbr0",
            "mtu": 1500,
            "addIf": "eth0",
            "isGateway": true,
            "ipMasq": true,
            "promisMode": true,
            "hairpinMode": false,
            "ipam": {
                "type": "host-local",
                "subnet": "{{.PodCIDR}}",
                "routes": [{ "dst": "0.0.0.0/0" }]
            }
          }]
      }

- path: /etc/systemd/system/containerd.service
  permissions: "0644"
  owner: root
  content: |
    [Unit]
    Description=containerd daemon
    After=network.target

    [Service]
    ExecStartPre=/sbin/modprobe overlay
    ExecStart=/usr/bin/containerd
    Delegate=yes
    KillMode=process
    OOMScoreAdjust=-999
    LimitNOFILE=1048576
    LimitNPROC=infinity
    LimitCORE=infinity

    [Install]
    WantedBy=multi-user.target

    #EOF

- path: /etc/systemd/system/containerd.service.d/exec_start.conf
  permissions: "0644"
  owner: root
  content: |
    [Service]
    ExecStartPost=/sbin/iptables -P FORWARD ACCEPT
    #EOF

- path: /etc/crictl.yaml
  permissions: "0644"
  owner: root
  content: |
    runtime-endpoint: unix:///run/containerd/containerd.sock
    #EOF

- path: /etc/sysctl.d/11-containerd.conf
  permissions: "0644"
  owner: root
  content: |
    net.ipv4.ip_forward = 1
    net.ipv4.conf.all.forwarding = 1
    net.bridge.bridge-nf-call-iptables = 1
    #EOF






- path: /etc/kubernetes/certs/ca.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    

- path: /etc/kubernetes/certs/client.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    



- path: /var/lib/kubelet/kubeconfig
  permissions: "0644"
  owner: root
  content: |
    apiVersion: v1
    kind: Config
    clusters:
    - name: localcluster
      cluster:
        certificate-authority: /etc/kubernetes/certs/ca.crt
        server: https://:443
    users:
    - name: client
      user:
        client-certificate: /etc/kubernetes/certs/client.crt
        client-key: /etc/kubernetes/certs/client.key
    contexts:
    - context:
        cluster: localcluster
        user: client
      name: localclustercontext
    current-context: localclustercontext
    #EOF

- path: /etc/default/kubelet
  permissions: "0644"
  owner: root
  content: |
    KUBELET_FLAGS=
    KUBELET_REGISTER_SCHEDULABLE=true
    NETWORK_POLICY=

    KUBELET_NODE_LABELS=kubernetes.azure.com/role=agent,agentpool=agent2,storageprofile=managed,storagetier=Premium_LRS,kubernetes.azure.com/cluster=resourceGroupName

    #EOF

- path: /opt/azure/containers/kubelet.sh
  permissions: "0755"
  owner: root
  content: |
    #!/bin/bash

    


    # Disallow container from reaching out to the special IP address 168.63.129.16
    # for TCP protocol (which http uses)
    #
    # 168.63.129.16 contains protected settings that have priviledged info.
    #
    # The host can still reach 168.63.129.16 because it goes through the OUTPUT chain, not FORWARD.
    #
    # Note: we should not block all traffic to 168.63.129.16. For example UDP traffic is still needed
    # for DNS.
    iptables -I FORWARD -d 168.63.129.16 -p tcp --dport 80 -j DROP
    #EOF

- path: /etc/sysctl.d/999-sysctl-aks.conf
  permissions: "0644"
  owner: root
  content: |
    # This is a partial workaround to this upstream Kubernetes issue:
    # https://github.com/kubernetes/kubernetes/issues/41916#issuecomment-312428731
    net.ipv4.tcp_retries2=8
    net.core.message_burst=80
    net.core.message_cost=40
    net.core.somaxconn=16384
    net.ipv4.tcp_max_syn_backlog=16384
    net.ipv4.neigh.default.gc_thresh1=4096
    net.ipv4.neigh.default.gc_thresh2=8192
    net.ipv4.neigh.default.gc_thresh3=16384

    #EOF

runcmd:
- set -x
- . /opt/azure/containers/provision_source.sh
- aptmarkWALinuxAgent hold
