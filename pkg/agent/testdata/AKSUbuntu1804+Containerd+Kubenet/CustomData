#cloud-config

write_files:
- path: /opt/azure/containers/provision_source.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/9xZbXObyLL+rl/Rq3DXUm6QhGR7nbjIXSzGCmUZKF7s+DpeCouRRBmDAiMn2dj//dTA8KYXr5LdOsk55S/W9DM93U/3dDfw4pfurR92b91k3mggw3DMK9NC50Nr7JiWZFjOqaSMxX1IZcOxZsuOoiqWYynnSLMt8SCTnCpj5FxK1vBdITnMJO+0sexcSmNFtd9LI6Ra4m+ZwEBjJJloA+AoA0i65SiqaUnjcaH0dSZSLX1NJPRKWWZ6IREyiWlpOvNPToXmlTqUS1g/g8na8AwZa/r7vZpY1i7VsSaV2/tCTX6GrjZg6kdQDymuEA9q4koA+iwC59rJVbptrJilg30WhXPTGemjLUcfVjSs+cZiMtRUS1JUZMjrEBaVsyPTMWxVVdRRIRv0StnawQPGy5l9gmhaqZrlnGq2KosDxoZyPtqwbVBuGyOrSsZgvx6o85Gj2xVTBwdr3gytTbjDdZyhUBvXoTlBqrJu6r5Q0K8bmuzI6GQDqL8O0s9GjiTL7I4NoHoDywhk0qM8fLJuaCeIrbL7oNnWCaWUuqJmooNKTCRdcUxkXCCjChA2AmTVdMaadmbrDNbfCJP+3zbQOjgPmmRJm9PwsFdBrOb/oVARribgYX8tWmvaf2Pah7ZpaeeOiSRj+M6RtXNJUc3MxCMGGem2IxvKBTLMam4d7a+LVy05Oqhg0IUyRI4+tkeKWlN0WIIU9VRzDO3cGWqGYesWksUjllDm6P3Wc1731jGVE14LZZ2UJWVc8vi6UkFtXZYsVIpYxgxNRPPwQjEVTXXMoaHoVno1DSTJV5Wi2qscQmuOrY8MSUYVRMUM3TZGLDWFHouXeWXSK2UgGilR6A1gpc/IEjrX1BKQNxvFdCTTVEaqY2ia5eiXopBX8oos7Tw6Ms4Vk7oiCnkZ16W0Ogw1/SoFiYIwqOzW9fGVo0umeakZ6b05VUaiIBxA7Q4WlVhjGS4IedHIKsVaCgrCbzWApiNDsijJyDA0QxQEFhxaktaFr1kRuHgnZ66V5VLImwCVndjKWM530fqfbcuupWlJwzNnhCxHMs4dSztDqijk/WsVoiLrUjPOGAV2Zo8o5O1sFW7aJyqyHN1Ap8p7UaAdLWPsUtKdoYEklp1C3hQqAkU17dNTZaggNc2mM8fUpSESBdojUrCFxkjXDEvOb5RtZB3D1NFQOVWQLAr7PWg0NFPkWkkUE+Bj6GIy6b7kYxxgN8HwCDP30x3s3btkMm9xvVfQ/aOlyM5YOUNiaxLFOEraj4ostjov222u+wrcNnyFReyHBEi0XCxw3HKv+zfgXg9u2seAP/sEnvbaDfvEVi3b0UxHlc6R2Mx+NxvGOzQuV+mvZmOoGUgzy9Xsd7PB+qDYXSZxN4gmbpBOYHfLWzwhQSPLuExK171ocofjBv68oM6mJedC3D/odQ6ETu+wto5Mq6o1fPA9322oF4qsSHkm0yJC49vv9DqDxsqi0BEGHYEX8j1FqaUdnyZ4bXtvRXUa2/diZrBw1Om97vR5odFwF+Teje8upbEfLj9LMxySVhu+NgAA8GQeAdfyXILbr7jWPEpI6N7j9itIiBsTaX0rNDmhme795PrEmUax4y6IE0STuyRdjjGJv0zuPcefOlPXD5YxBpr8B9A/AHdBeKoROAE+uQHV6qZaHx/hQ7rdn8L1dXoIiCI051HgNeHm5hjIHIcpIrWbZgS3cb7N/ApW9CzDv9S0dSBOsVP/LwjDobeVrqdGYwMtRRSozMeJyAnHGatJgPFC5PrHQPx7HC2JyA2OIZn7UwK//rryT2ZeFIMPfghcK8EfQQCOKW0fgxcV3jJ1wBX/fP39iWq6jbF7V0YhjwRwPvD4Y6ENVukrOEGf8WRJsAcfmtzvH5p0Iz0jOa5BY0yWcQhCSX+Q4BoidR24koZCyiLgRSFu7HDs0ybKnTByEuKS5L+F+3+K0ApbM0wc4sa3bhAULBE3dp5jKoOnTC3jQOT2ywg1ua+V3U854c0t1FWwK/S5MfDkz2kKoaftQl1F23fSlwfrsAeTZRwAP03MMXDpv1Fhy99jnCp2pn5QVoR0ZcfUpBsXLpmL3D5j/6DGflXXX9JfBdf5v74Gfgpcfhrc3BQB2Mx9VdXfJL+4MptCkFv0XTEomliN/meYL9kepNCF+4A9sRstSNf9cxnj7iSIlh7vhz7hKTbppIgUO4vxAvjTjzQquZ6nJnApgrLJGOl9S1kplO69QNrpXiVCz4fn31FVUiT2gPeh2aXmdb3mSsCyhlrY/PYto6Mam2LAKAL0ae4HGKbLBMfQfXDjbuDfdr3F3YzOXnflkrsg3cBPSFJZn7iTOU4lbjyZ+w+YCd92PfzQDZdBAP23vwo1klMr9y5dn/jhLI1MPuxGUzrUQGreXqNOz6CaadQJWlqXCzo8rKWakAWdojKEEy3JYknELrlfUGv5GSZ8JupEy2/qPFsmtdSxbH6V0Ykiqc6poakWUmUxjEI/JDh2J8R/KCNPGQaen0Th1J/RwY53geenUTzB6aKHpwWWmUyLBv8F/DAh1Tr5C7RyQOZTyjk8AsEYuDUW6DNFmucImn+0ri/RzZvOy/Zj6xqjmzjuvGxzzTbN97INTFyySc/mnrEZ/A/dG5YMBzsOMiu05APNtpG7TCxG8Q+YbH5ofjG3aSuQF3ezN2+0BfGjMHnzRmxW96bjP8+HEc928DGeRPf3OPQSmqE/ehrLb39ZI74xYQoitvu4cTZ/NqkWy3j2Ix5UfmhKpU7vmFA/PnF2yw7m0/fkgOcnNCVnsevlqVDrWhRXxWzsXBTAMwDrXzukwpY02D0Fdg3/9m5VvLJI5tGneRRko1ylf1U9o5tXG9kGar6tnRXdaZOm9cR7Dt7YMStr+bjWxNKMY/m2OdtqnFRa2MY8S74kBN9PCH1aSF87fVu9geRhErr3OH/q/N7H8cIM8Fx8H4V8jIPI9XbZwOwGjpnys5SDKrcJiRb/ccRSo39qVj0/cW93e3L8qYhldv+c3GalgLrybbz+XTIpMTyfkfTzEPKA48SPQmdWPDUSnBBocq30i8kU9v4n+RDuQZP7vQmPwD7KXMAjzLHrAR+C0M5egrNX0UUWoJDmgBR6Zq3qrtVjEHo9OIBBD7jMHwNl30FNS7JsU+T+r74PEuKSZQKckA2jC3eGY+ADeMuezKMZe1nCCXyG7QTRrNKc6gcAH2LordHMXnAJMImWgQdhROAWZx8usNdsbIwEo9afwi/Pf6koncFhdlOEnY7P0B7cfilVbLelGg05u5JpOCql2p9WbAnSvhr6JKFTzDKd9unMn88TH6lBnQTHD/4EN1cMrvcCyD3lBJri28iMFosqmWuVbyc1DMv0ZH6/yMkg8RJTL114K8ItNBJ8/4DjYXS/cCvfSNiXL0cSuVb2zogOWZMlAd6D5v826eQmtGvQkwLa3wZNPxF9LXQ/sXtSrJw8NdmLztqrOXrHsCe2gGuxF1gVHVDdTgfBGPboH72j+fW8gDY8YwH3NTvhWrh52nR+kUZPjRfv0FhHhom008a/AgAA//+3ze7+TSYAAA==

- path: /opt/azure/containers/provision.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/6xXbXPaSBL+rl/RUSi/ZAMCnE3iS5ErAnLMmSBOCO/dZVMqoWnBlMWMMjPC9ib+71czAiFsdmNvhQ+UNNPT/fTbo57nz5wZZc4skgvL9f3wbDB0w9+6Qe88DAafXG8adF6DJVFB/caiCXyGegIOz5QT/ZELdGLOVEQZCulkgq+opJw1Yr7MUlQIX96BWiCzwPwwXnCwu6nAiNyCiBgoDjKPY5QS8IYqyuaNRsPeiN9QBU0roZZlTtaOSKTw+GXtaMGlYtESj1+CVJFQcS4VX8pY0Ey9f2/QLS0r4QIoUAa1I4lfoQUnr5vN43dAuDFQOCN/5EwoeS5ibMjFPW8A5gIzqJ99hcPn5+5w7PoT1zs7fILCgwOYCYyujMaEbmHVKNTxqwH8wKoJS21/rowQphJLaZkiZtDaWCCcoSWRQJ2C7VRgO8R+PHCreHrCAes6oipMuAgTmmLhWOuH5ymTKkpTqWP1/ftfe/5ISBWVfxNUzFlC5z8T01ajZTrtlxvLDXr9cOy6fthz/aBTOyo64Nvu+uBs0OsG7uQOvkOcK6iTw8+HukHb24UvZqG1XXhpFmpHR7VvI6/vhoNR3/3P3S+t4+PjitkL97/7rI79wWU3cPX2z7O6ZhdDL5+h5k2g04Faz/NdbxJ6k3DU/eTCl2ofFEzSW0RsTtkcCCZRniq4ymcYqxRmlEHK40hRzgo2uZh+cHvBsGNSsRYzzFJS2ioSjsiZI3DGuaoL/JpTgWSn/Xz3g+cFvvvv6cB3+x0lcrTKbru3mUR6Q5so0psL7JIlZVOJYuOqXfv2cTwNdUDubHjWAVurtHd9jVOM2DT7OJ72BV2hkEbp5Xk/HHofJ6bsxt3gvFOpstWC1NeFXnJx6WntwVF4GFqCCmOFBOY8JciALqM5QiZwo9euYuttqnqgxaTZOpsOh+FgNAm6w2F4LyplzMowDCbh5Xn/zoYO6BDsRmALayp1ui/P+0CoVILDLFdgmnePV4wrSHjOiL2HO7W46diRF4Rn3nTUr5LwfvAm35ui2Rbq9MN0FEwrhap5XXu1V4t2cZPmio/rsPYxk9vwFE5/rKTgHcgrmmVF0WfICLKYotwcX1f8IzBWM86kLs6cUNUvjhbKyqz6OVN0ieW6oLp7nsMggdg8wxxViQGJUQ25RKAKIqlftSDEKTVCGBHgCcRKWL3hIAw8b9ixC022VZofobrm4mqc5nPKytWLfIYpqouihbuM6Kex4De3VZef/Yg/jMv+uFc0qMBIoVb0KWI0Qan6VFT69uKtrLz1RgPLsgoNZYgIbJY+cUYVFxMUKxrjZnVyK3XMipe1D+u3f/FcsCg18PeXTLVMHp1V/dvtnjYhrRhbb+rNN6dYf9U8ieuzk1/b9ah12m4htptvEOE9OPJWOrNcOqul/icF6TiLVZgrmjo5m1FGtvPFepZondDff7qV35kNDqrYEXFD83m66dGEWmJpaFvvRpr4MtXQKWoQ5/Q0Q0E5ofFTuiDKVDhHFWa5mCO0m3DShFa7CVEWxQts1zUsCQcF+XaHg343GHij0PX9TtOyuuNBOHH9S9cP+6NJ6LuBP3AnnXZzg6AiYGx3OvCikQm6ihSmlF01XlTh/Kk6Mw777qRTOxKoxG28JCFNwiSiaS4Qat/2n7zT0y8wmXJ+lWe7YhrO3bE1CSad2j83cCeBaaLmbozWm75rwvnCbr1+23h90mi1Txut1/YLeFiB9yJlqPfi7SSs2O/+b+q7BuzQ8y6m4/CsOxg+HGQfoWmfjoRu6bQi2vNGozKsvzar3j0tU8XvzzS3ms3qZ+WHKaseXucshvrqjz0Zg1evTvQA+oi4GK0mIusPQ213Vrn/9T8sZiDYzEAvoVjQXx3GCeo7VQuWlOUKD82x8g4J9RhsucgV4dcM6gJacGD/DeaKMrWMxNVv3SFl+U13jkxBzhY8JXDwIK9PU+3kUjgpnZW0IW+lwiVpkIimt2v1j8VQXk7tnrmDQnEJhYQyKhdIGro0QKJYoYCYM4ax/kRDvMD4CmJO8B821HZz+Be3XWRk7113eUWogHq2/6qh5xHF83jx6Iu7lUmI8pvk+lpT9fZQKVnPZCPlcziwrGKmuueC9dz1zqz/BwAA//8ekYSzXRAAAA==

- path: /opt/azure/containers/provision_installs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision_configs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/7xae3OjxrL/X59iLtHNrusEo30k2fWNXIVgvIdYAoXHZn2jFDWCkT0xAmUYbCtrf/dbw0sgAUK1t47/kG3R/evXTHdPD9/9l7QkobRE8d1AN1ToaroKv4yHr++imIVojcEzYIgEQPTA27OMRJdnsEJxNiAr8McfYGhYYDwGQ8UwoWG5hpUSgj///B/A7nA4AACAual9lm3oavPx8DXZAATiu+gRYHY3As/gluINEOcReEVCzMDi+o+Ff/7nv16dDXAQ40OAUkdRA8/ASxgQ/VfgFRBXb84GKzKAtqK6cwhN1zGnY+GOsU18IUnDrzuUl4u37z6MhIxUmWpQt7uJf/4oDAZeFK7IbUKx7K9J6MSYvj77murn3aFbDEQIxDdcK/65BiMgzsBH/gOE4VdZnWm6Y0HzRaiyBPvPXipyLOxRzOJCijzXLGh+hqZbKHcNb9y5bP97LEiYedJ9ssQ0xAzHkocpiyW0ITGmD5ie3+NtJpdFiXeXCm1FKzVcRz4Y/TQa9SSPHkNAo4hd8I+jPCmTIve2xUMNRjTwN2rfRXegdjNxSp0umBODgJnnt0ahC7DRkh4M2cYU/0ltMayZYbmOqb0I9U1ZmM7Vu+AfPdFXpOKKfO+c4govIDhkba5oAWx3xTGGg+ge4drZlqaQUyzbYEyHX3f59KXNyEbkdhO7yL811l3YtUjni0KBpq1daQon77noPco6Fv0+4J4b3r/vzdAc6Xaug1V8im35Km6xrQWw3bZjDJ2ruNO2NMCnWHa4iluMbERuN7GbvNnANp6UKcYM/Osp/RN7d1FrwXkRwDNYohj/9B6Ioo+9yMfgsldNK3DrFaEdsL3MFEgtCbYdskdGrmEfZrYj2N0JtIadhuM4YldOafJDJcD9/NCyipr80B+7ewse+oET9nFEA+DLYIDDOKHYnCuvz0DW3cXbmOG1xwIYomWA5dC3GKIM0I23JKEPnp8BfiIMDKFputaNZcOZYk9dy5ZN272StekxFDFmiPXBKdWTE58wNdcwqzR81ziqZqsu1OXJFKovAm//GU1wveS0KYI4Zj9ryvafrADaMBCQmAFRJGHMUBBgvzg7vMowX9UKHtow9xYzd5PQWwzejsC7EXjzdlTI/76ocOlHtem+TpY4wMxKi5eCKSsjdO1M4BTap/Z/9xngfgu4h8aXyQkwaU5OcaINDuM4ALc4pDECYpQwMDyiKng7ev+hxk3x30AM8SMQn34cfQSij7Yx+PndaATEe7w9DtgotrQJiHGy/AsIkqKP89rCT4l7x53rD/GBr3ufDtq6yjagxnbrKPFBmerg2D+zOZOpppxwZDssu61gjVX3OHXXge2AJTPnfx0Tur9aht5iBPonofj8rzgK93WvczafMVtoDvU8IGzrCBri0560j4S/ocsovdSryWgMQ/rBKTQFcsm6os3laVGOLKiY0B4Pvx6hkKTFQlosFouX/zc8geMJGZ6HGPjlFwCNq9yogwBk21bwgijxhQsgyHwhzJNlQDwl/e6HjIDhEIVMS2mGX22oy7rtaupL8TxOlrFHyYaRKCyoLGdiKaY2tzVDr9Ii5Cvpvi8J24xqYsqmK0cYM2+UzBTHUUI9/IlGySZjNaFlOKYC3U+m4cxLyiDyELchI5oaisy1Lx8/rO3tBmcPP89c+2YOqy4IMdPRGpfm6xUdYuwllLBtqsOOSof274Z5zTV2TM2+2dPnoQb5WTNtR566OVONyjy0cY/cbbGZRgnDNi/3O0mm4djQtXmvUNJtKFkjupUfEAnQkgSEba2qdnNTm8nmjSt/lrWpPNGm3Byr4oIcwPJQgBs5LUWewhpLujDnNHogPqYT5N1Hq9Us8nM+ZWo46tw0PmsqNN2JrFwbV1fuzFBhJ4BwAVp4Xzq4TMwowXE7s2tC29Sg1QUCnzZRiEPWgQK/zA0d6nYXjJrQYpm2waiOma3dDphfCWOYdoD8qtk2NBshTMTwlKxJkymmbMOpNtOabSg5f5tbXczub/NmX5YAk8S7x50KuBNHuYbH9fidEoaPKeP+bmo27KPScbhMrzpiEuMZCtEt9jUfh4ywLXxiOIyLQDsWdGeyLn+CqqupULf5BoNfbKhblUAnMaZyHJPbcIejqdmGcSxourJlaZ/0KkYlzyYx1ninHnp4hhnyEUOlbE23bFlXoDuDtqzKtvxSZk3kT1DAmah1nxTJU1bdiTzlHKZrXTulDJ/EPNsYCVtGSehbumynMuocqmbx9OMajj0xHF11OV0hET95QeLjGYoZplc0WlsMhT6i/nSSQsEvytRRubssG5rulWnM+ClFV2VTdaeTlzIjZeH7jJKgko+uZ5Zbxuyz7EztvPHN2dboiayT9bRitpkEWImSfGfP5C/azJm53KLSINOZQlcxnN3WLsRf420h/P5DLBw+/YxpvgoE3nxD46rsnMSnykTxSE4EYyA8vD2YMnIgH4gECFJXzpJ8AbQ3jv2wsozTA6mYYrYf8GqHEEXXykNI+kExo1tv7btk5a4QCRKK04Pkj+Dtj2Ad+RsaLTFYUjfEbEUChmn9cDszuBMncHdGT/tIMQRClUkAl5kl68hPAhyLfCuc+1KV5pxrWTdG0TVtnpbcOFN5z5biYWlTGd6ils+nzidNz0Kauq4hqusHMFR0zZ1ouqtqpvRmJGZe5qLSY3n6WDH0K+1TSlGyZh0+b/D3SQ5ASp5DHY2pptxkowbBQwHxogYtyxXzKv5OWKe1XVhS4t9iofyfURTGG0R55fzu9tUJSuGgWy2Bh73tYRiFqV/B99/vYRT7aQxquv2nrUsnIdmPFC9JKOElSxcOEBkIEQOiWNJnA5N8RqREIUMkxNTPl9gjIsxdRdRdkSDdKSPwJlvZ2UjIz39LXsl5zk+8xMPnvoSfsOfGDFGW6ljfSlfaFLq/y7byb9fWZtBw7E55OwFStiXOWbQOvgky3sYeC8596c0bsaJ/T1U7U0kGDUQxc8/BhEyxp64JeR0YpJmpHLABEovIY+QBA1H8OyGYAT/y7jHli+11SebmxbIyC8vJGmZxqqsayjWvtrYxTzPX2aB9prfzRL/pYr50ZlFIWEStLPj1rJuLnxm6Zhs7rbgvM+eOm5ZUZpC4zoDPGVljmsI1RnR4VEiPmLaq2lfJfO2frmZvBdvC1uStngEsQpjX0oOxnQqv0mZn5wQfr3hrVIwxO8xtwuhlJ2fMk10m9wFRKSDLQmb6O8sER8RXUHpL5iqbjs6/LlJuNrTIlYk2LGtNdnmpHOqex3c9HNKO/k3LINehjlFOcuvXC5WP8pZgipY40CO/0mRM5QmcurqhQquHEwIOIIYcodsRLbC9rK/xHtuiNY2O7s826G+KSkWFU65srLSKlIHI60ZtV9Tq2MePH8XsHxHdx7sGs9nSQ7heNjbVvbfvG8vezpJfo4SGaGfK110nls5hLRZRdIvHG36iiRlvefYpUsQZenJiPH7zaf+xmYQ85bU+v4roI6K+HVnbOIhux1scZyQv4PKy3tH8lenq7/zXFtacQyw4Tont9YeYd1s0CuYBCnG1pR+acGIYtgl/czQTqhyVd5m6UR560/6e0YS3oXudJcUsoeGg0gZ2NipZhrSn4O2l5OMHKUyCAHhBwg/QIglX0V4m+WDxzKVr+qdyUfBDCsWIpfVjhkKywjFTCa3VkZmsa1fQslXNHO+f8dY5T3boWd/7hAJxk6lW4eOCHinJ5Chp5q+JyBZyKuAuWmNpWL6JJ51zaXuE6f4Z1hilSj2pq1GSVO5BhnWsyvXGTvLF7s8moJ7kFXh+/vqZn7+awMrDWQPrwXXKQBTFAdqQfIhwAR7eDPLAxxcDsVgEFxk2poysiIcYFlHC7iJK2Fb0EUMXYCEMFbl6M74Qcon8TH5RK8LZ5ckAgBCtccpajGJ+U/WFwE+7DD+xTIHs71yBXJtDFv40iQ8fichfkzAlaBOWUH64EgtBhxT3JPQvQLbWBlxIqlgTXEVaqkyuNEnxK84rXVZxyqHrcsZ7vG1kuIY3C2EggMvWSItPu9mBkrlOTlgUeyjAVPb9KCy3jjJ1UitkxzbSSbvpyqpq6JUCU53HcN5YKjIEKkFFH2+CaLvGITvfonXQUXg6Jfars/kwKX7+JXOVpl4+D1+nC3vYcW9UXuudPd8KRxRpFmRhr4ek7KLpW6TFybJmU/3S7FuQ8zu7Cnh5b/ctsPR2B1i/UToJtVy1sqIpURhij0V7C1ZW0jGIDhV+gFJMmM6r5ak1Hr7eUBKyFRC+LoR8YfgLgW+f/44Xwg+g+Da7Law/Ke4y69/WbzDrz7JzukpoquQWhv4mIiFzaJDRFe+fB9EtCc/XxKNRHK1YFAYkxOdetF4IPyzKW8hsxk9bUdbp83R/FWOftdSoyCeKNnfFxV+hdAFzyx+eP5LQjx7j8xCzHCP+O5iVEvoo4UUUV3EuPrx//y4Hu0VBgDs8kj8/MGT9TRpIC+FFAEJXAuh8nO1aTlLuiJS+vveq7wY8gtFZ/cWd4tWbe7wFNEYX70cff8rfxcna/+orOe9++jF7JSdK2MHkO3+DxCO8PmX7gJOeb/A6e0GnDwP/LuMo3tkZO5Zk2WNFlqbjB0JZgoLiRG0cfOHsf6Poe98IDVvyGt6Mh69zH51k1uPorGmLQ9M+DXBn9mMRoDrk8QpXB+xf3NrknFzXKPbjy+dha7ZLk2mbtMPsrKM1vnzeS80nYXCnHioETfsklHu8PQC5hjfdGLuqkL6IEgXE2+4VhfQdlmxM3ye6HEfcpECNwa36rsykl89StR7E0n5ukGqvlMRSo7ubNU0ncd9B42rwfwEAAP//ohUofdA1AAA=







- path: /usr/local/bin/configure_azure0.sh
  permissions: "0544"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/6SU0W/bNhDG3/lXfJGFqsVmyR720CQQBsF2N6ONEsTZiiFwDVqiLM4KqZJUPNf2/z5QchS5W7ZhexN0d9/9+N2RvbOg0ipYchEw8Ygl1TkhPUyNpyFFsYVgCdOaqi2MRCJFxleVYqBfKsUG4AI/LythKgzf+oPvSaGXC8UKRjVDn2MPulmj/8678ODtSsWFgfvdwWv+ezt3GLrDSxwDw4OHPVaKleh/5nA+VbW06xCe4R7uDzgLMcD8EiZnggAAS3IJb2rANYQ0TzCzNS9bWC5WR1yvqfmdGwxIxskprvo/uHA+1Q78B9i6zv/XzD2McpaswTOr3GQhEfxYa8VNzhTzfR9CQjCW2tGpSsDkXEMnipfGlgtpSA9RoSVSKTyDDRXmJHeTM1GjVrol6ieCk3ucoZ8hYCYJEsEDwYyfBsNBv07xLUrBtcEcr149wVvyeArD6AMemDBcCotKTdPraIrlZSkyqZDQgif2BGYj1RqlLHiy/YuzkNpYJz7Ju4C7iyd3H69v3y9urj9MR78emtHcw/lzBGEIp+nnYH4ytL93foCl4umKWXxaKEbT7fMtSUkPH9nR3O4geAYtfcJLFFysoXO5eZLr+KUqsSiLasXF6zfYHWlKqYz1cTG6vrqK4nHoDutIQs0/j2OP3z7D8wV9YKAabv2xh58I/gtTmktR/348fu/hN/31/fybEDubftFUfYvnmou24tAtGczt/QhkaWom+8Q0C/QomCEHQjqHiW5/nIXe+7ezxc31eBFHV5PZTTSahCnLaFWYy24kbP2NrNwonnrkxJf4LprGk9vpODw/Pz/vxuLJXTwLA1UJa5HQQStFv9i17qRO39W9mMm/FrmJ7n4Ku8cidpC1Hmiawn29pJrV1rq7tuvhTWeeiMZj0j4U/ZX56qVo9VJWwHlJ0Hle0GG9oJ0G48kHcqLyItUfAQAA//+8Xj4iAgYAAA==

- path: /etc/systemd/system/kubelet.service
  permissions: "0644"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/4yTT08bMRDF7/sprIhDezCG/rkU+QBloRERRWwQhxBFXu8kGcU73trjEFr63atNCJAQpO5pd/x+783a48ENIQ+zU4g2YMPoSV+kEhxw9t1ThW3lyvA0X2DkqFWKQTlvjVMlkpo9SbNsUECYo4Vhdg2RTWBt3L15iFlOcwyeaiA+QwdaAVtVwdgkx898kayFGPMFcsGGU9SHXz5n+QJs0XpdBdDLvNLEqVC+YWV+pwDKemKDBCGurfbjdAdXzyoMQjZCzU1QDsvn5P/RWsL3epFWdHAsBmLvQ+0TsXgUkwCNuOtsJ911xKO4t0K6j0I6EAdiKI4ET4HEKnaJS1kiVW/afFs4EmPs7Or+yaY2M5BxagK8dcs2OaliS0LJpnQQhWRBpvVwGHmnFJttKaUaAto1tJWwNTXW0xgnKcBoeYoH7Zm9AO/MmLjLxNMjJVCbLyOEOYSNFfIVSGdKcFF39v5c3Jzkvbw/uvx5mo96xyd5r/jb2QDm+pOQ8nmQZEjEWIMOUHsGIdcFGeBXgsiy/fCJ9eHXehcogarGI7FOhItvSqmQ6GVQq1ev+9Hb2WYz3qUaZOPSBElWGFbXpd2CQMAQ1UqxEsRX7N76T896x+fFroXr/Lxb9PPr5V7sKN92+z9G/ePuZb/IskGXIhvnhtmtIYbq5EHXyTHKFCHsswkT4H8BAAD//5yxbXI7BAAA



- path: /etc/apt/apt.conf.d/99periodic
  permissions: "0644"
  owner: root
  content: |
    APT::Periodic::Update-Package-Lists "0";
    APT::Periodic::Download-Upgradeable-Packages "0";
    APT::Periodic::AutocleanInterval "0";
    APT::Periodic::Unattended-Upgrade "0";








- path: /etc/containerd/config.toml
  permissions: "0644"
  owner: root
  content: |
    version = 2
    subreaper = false
    oom_score = 0
    [plugins."io.containerd.grpc.v1.cri"]
        sandbox_image = "oss/kubernetes/pause:1.3.1"
        [plugins."io.containerd.grpc.v1.cri".containerd]
            
            [plugins."io.containerd.grpc.v1.cri".containerd.untrusted_workload_runtime]
                runtime_type = "io.containerd.runtime.v1.linux"
                runtime_engine = "/usr/bin/runc"
            [plugins."io.containerd.grpc.v1.cri".containerd.default_runtime]
                runtime_type = "io.containerd.runtime.v1.linux"
                runtime_engine = "/usr/bin/runc"
    
    [plugins."io.containerd.grpc.v1.cri".cni]
    bin_dir = "/opt/cni/bin"
    conf_dir = "/etc/cni/net.d"
    conf_template = "/etc/containerd/kubenet_template.conf"
    
    [plugins."io.containerd.grpc.v1.cri".registry.headers]
      X-Meta-Source-Client = ["azure/aks"]
    [metrics]
    address = "127.0.0.1:10257"
    
    #EOF

- path: /etc/containerd/kubenet_template.conf
  permissions: "0644"
  owner: root
  content: |
      {
          "cniVersion": "0.3.1",
          "name": "kubenet",
          "plugins": [{
            "type": "bridge",
            "bridge": "cbr0",
            "mtu": 1500,
            "addIf": "eth0",
            "isGateway": true,
            "ipMasq": true,
            "promisMode": true,
            "hairpinMode": false,
            "ipam": {
                "type": "host-local",
                "subnet": "{{.PodCIDR}}",
                "routes": [{ "dst": "0.0.0.0/0" }]
            }
          }]
      }

- path: /etc/systemd/system/containerd.service
  permissions: "0644"
  owner: root
  content: |
    [Unit]
    Description=containerd daemon
    After=network.target

    [Service]
    ExecStartPre=/sbin/modprobe overlay
    ExecStart=/usr/bin/containerd
    Delegate=yes
    KillMode=process
    OOMScoreAdjust=-999
    LimitNOFILE=1048576
    LimitNPROC=infinity
    LimitCORE=infinity

    [Install]
    WantedBy=multi-user.target

    #EOF

- path: /etc/systemd/system/containerd.service.d/exec_start.conf
  permissions: "0644"
  owner: root
  content: |
    [Service]
    ExecStartPost=/sbin/iptables -P FORWARD ACCEPT
    #EOF

- path: /etc/crictl.yaml
  permissions: "0644"
  owner: root
  content: |
    runtime-endpoint: unix:///run/containerd/containerd.sock
    #EOF

- path: /etc/sysctl.d/11-containerd.conf
  permissions: "0644"
  owner: root
  content: |
    net.ipv4.ip_forward = 1
    net.ipv4.conf.all.forwarding = 1
    net.bridge.bridge-nf-call-iptables = 1
    #EOF






- path: /etc/kubernetes/certs/ca.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    

- path: /etc/kubernetes/certs/client.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    



- path: /var/lib/kubelet/kubeconfig
  permissions: "0644"
  owner: root
  content: |
    apiVersion: v1
    kind: Config
    clusters:
    - name: localcluster
      cluster:
        certificate-authority: /etc/kubernetes/certs/ca.crt
        server: https://:443
    users:
    - name: client
      user:
        client-certificate: /etc/kubernetes/certs/client.crt
        client-key: /etc/kubernetes/certs/client.key
    contexts:
    - context:
        cluster: localcluster
        user: client
      name: localclustercontext
    current-context: localclustercontext
    #EOF

- path: /etc/default/kubelet
  permissions: "0644"
  owner: root
  content: |
    KUBELET_FLAGS=
    KUBELET_REGISTER_SCHEDULABLE=true
    NETWORK_POLICY=

    KUBELET_NODE_LABELS=kubernetes.azure.com/role=agent,agentpool=agent2,storageprofile=managed,storagetier=Premium_LRS,kubernetes.azure.com/cluster=resourceGroupName

    #EOF

- path: /opt/azure/containers/kubelet.sh
  permissions: "0755"
  owner: root
  content: |
    #!/bin/bash

    


    # Disallow container from reaching out to the special IP address 168.63.129.16
    # for TCP protocol (which http uses)
    #
    # 168.63.129.16 contains protected settings that have priviledged info.
    #
    # The host can still reach 168.63.129.16 because it goes through the OUTPUT chain, not FORWARD.
    #
    # Note: we should not block all traffic to 168.63.129.16. For example UDP traffic is still needed
    # for DNS.
    iptables -I FORWARD -d 168.63.129.16 -p tcp --dport 80 -j DROP
    #EOF

- path: /etc/sysctl.d/999-sysctl-aks.conf
  permissions: "0644"
  owner: root
  content: |
    # This is a partial workaround to this upstream Kubernetes issue:
    # https://github.com/kubernetes/kubernetes/issues/41916#issuecomment-312428731
    net.ipv4.tcp_retries2=8
    net.core.message_burst=80
    net.core.message_cost=40
    net.core.somaxconn=16384
    net.ipv4.tcp_max_syn_backlog=16384
    net.ipv4.neigh.default.gc_thresh1=4096
    net.ipv4.neigh.default.gc_thresh2=8192
    net.ipv4.neigh.default.gc_thresh3=16384

    #EOF

runcmd:
- set -x
- . /opt/azure/containers/provision_source.sh
- aptmarkWALinuxAgent hold
