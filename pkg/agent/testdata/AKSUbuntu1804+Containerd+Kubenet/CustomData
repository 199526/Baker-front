#cloud-config

write_files:
- path: /opt/azure/containers/provision_source.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/6xXbXPaSBL+rl/RUSi/ZAMCnE3iS5ErAnLMmSBOCO/dZVMqoWnBlMWMMjPC9ib+71czAiFsdmNvhQ+UNNPT/fTbo57nz5wZZc4skgvL9f3wbDB0w9+6Qe88DAafXG8adF6DJVFB/caiCXyGegIOz5QT/ZELdGLOVEQZCulkgq+opJw1Yr7MUlQIX96BWiCzwPwwXnCwu6nAiNyCiBgoDjKPY5QS8IYqyuaNRsPeiN9QBU0roZZlTtaOSKTw+GXtaMGlYtESj1+CVJFQcS4VX8pY0Ey9f2/QLS0r4QIoUAa1I4lfoQUnr5vN43dAuDFQOCN/5EwoeS5ibMjFPW8A5gIzqJ99hcPn5+5w7PoT1zs7fILCgwOYCYyujMaEbmHVKNTxqwH8wKoJS21/rowQphJLaZkiZtDaWCCcoSWRQJ2C7VRgO8R+PHCreHrCAes6oipMuAgTmmLhWOuH5ymTKkpTqWP1/ftfe/5ISBWVfxNUzFlC5z8T01ajZTrtlxvLDXr9cOy6fthz/aBTOyo64Nvu+uBs0OsG7uQOvkOcK6iTw8+HukHb24UvZqG1XXhpFmpHR7VvI6/vhoNR3/3P3S+t4+PjitkL97/7rI79wWU3cPX2z7O6ZhdDL5+h5k2g04Faz/NdbxJ6k3DU/eTCl2ofFEzSW0RsTtkcCCZRniq4ymcYqxRmlEHK40hRzgo2uZh+cHvBsGNSsRYzzFJS2ioSjsiZI3DGuaoL/JpTgWSn/Xz3g+cFvvvv6cB3+x0lcrTKbru3mUR6Q5so0psL7JIlZVOJYuOqXfv2cTwNdUDubHjWAVurtHd9jVOM2DT7OJ72BV2hkEbp5Xk/HHofJ6bsxt3gvFOpstWC1NeFXnJx6WntwVF4GFqCCmOFBOY8JciALqM5QiZwo9euYuttqnqgxaTZOpsOh+FgNAm6w2F4LyplzMowDCbh5Xn/zoYO6BDsRmALayp1ui/P+0CoVILDLFdgmnePV4wrSHjOiL2HO7W46diRF4Rn3nTUr5LwfvAm35ui2Rbq9MN0FEwrhap5XXu1V4t2cZPmio/rsPYxk9vwFE5/rKTgHcgrmmVF0WfICLKYotwcX1f8IzBWM86kLs6cUNUvjhbKyqz6OVN0ieW6oLp7nsMggdg8wxxViQGJUQ25RKAKIqlftSDEKTVCGBHgCcRKWL3hIAw8b9ixC022VZofobrm4mqc5nPKytWLfIYpqouihbuM6Kex4De3VZef/Yg/jMv+uFc0qMBIoVb0KWI0Qan6VFT69uKtrLz1RgPLsgoNZYgIbJY+cUYVFxMUKxrjZnVyK3XMipe1D+u3f/FcsCg18PeXTLVMHp1V/dvtnjYhrRhbb+rNN6dYf9U8ieuzk1/b9ah12m4htptvEOE9OPJWOrNcOqul/icF6TiLVZgrmjo5m1FGtvPFepZondDff7qV35kNDqrYEXFD83m66dGEWmJpaFvvRpr4MtXQKWoQ5/Q0Q0E5ofFTuiDKVDhHFWa5mCO0m3DShFa7CVEWxQts1zUsCQcF+XaHg343GHij0PX9TtOyuuNBOHH9S9cP+6NJ6LuBP3AnnXZzg6AiYGx3OvCikQm6ihSmlF01XlTh/Kk6Mw777qRTOxKoxG28JCFNwiSiaS4Qat/2n7zT0y8wmXJ+lWe7YhrO3bE1CSad2j83cCeBaaLmbozWm75rwvnCbr1+23h90mi1Txut1/YLeFiB9yJlqPfi7SSs2O/+b+q7BuzQ8y6m4/CsOxg+HGQfoWmfjoRu6bQi2vNGozKsvzar3j0tU8XvzzS3ms3qZ+WHKaseXucshvrqjz0Zg1evTvQA+oi4GK0mIusPQ213Vrn/9T8sZiDYzEAvoVjQXx3GCeo7VQuWlOUKD82x8g4J9RhsucgV4dcM6gJacGD/DeaKMrWMxNVv3SFl+U13jkxBzhY8JXDwIK9PU+3kUjgpnZW0IW+lwiVpkIimt2v1j8VQXk7tnrmDQnEJhYQyKhdIGro0QKJYoYCYM4ax/kRDvMD4CmJO8B821HZz+Be3XWRk7113eUWogHq2/6qh5xHF83jx6Iu7lUmI8pvk+lpT9fZQKVnPZCPlcziwrGKmuueC9dz1zqz/BwAA//8ekYSzXRAAAA==

- path: /opt/azure/containers/provision_installs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision_configs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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







- path: /usr/local/bin/configure_azure0.sh
  permissions: "0544"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/6SU0W/bNhDG3/lXfJGFqsVmyR720CQQBsF2N6ONEsTZiiFwDVqiLM4KqZJUPNf2/z5QchS5W7ZhexN0d9/9+N2RvbOg0ipYchEw8Ygl1TkhPUyNpyFFsYVgCdOaqi2MRCJFxleVYqBfKsUG4AI/LythKgzf+oPvSaGXC8UKRjVDn2MPulmj/8678ODtSsWFgfvdwWv+ezt3GLrDSxwDw4OHPVaKleh/5nA+VbW06xCe4R7uDzgLMcD8EiZnggAAS3IJb2rANYQ0TzCzNS9bWC5WR1yvqfmdGwxIxskprvo/uHA+1Q78B9i6zv/XzD2McpaswTOr3GQhEfxYa8VNzhTzfR9CQjCW2tGpSsDkXEMnipfGlgtpSA9RoSVSKTyDDRXmJHeTM1GjVrol6ieCk3ucoZ8hYCYJEsEDwYyfBsNBv07xLUrBtcEcr149wVvyeArD6AMemDBcCotKTdPraIrlZSkyqZDQgif2BGYj1RqlLHiy/YuzkNpYJz7Ju4C7iyd3H69v3y9urj9MR78emtHcw/lzBGEIp+nnYH4ytL93foCl4umKWXxaKEbT7fMtSUkPH9nR3O4geAYtfcJLFFysoXO5eZLr+KUqsSiLasXF6zfYHWlKqYz1cTG6vrqK4nHoDutIQs0/j2OP3z7D8wV9YKAabv2xh58I/gtTmktR/348fu/hN/31/fybEDubftFUfYvnmou24tAtGczt/QhkaWom+8Q0C/QomCEHQjqHiW5/nIXe+7ezxc31eBFHV5PZTTSahCnLaFWYy24kbP2NrNwonnrkxJf4LprGk9vpODw/Pz/vxuLJXTwLA1UJa5HQQStFv9i17qRO39W9mMm/FrmJ7n4Ku8cidpC1Hmiawn29pJrV1rq7tuvhTWeeiMZj0j4U/ZX56qVo9VJWwHlJ0Hle0GG9oJ0G48kHcqLyItUfAQAA//+8Xj4iAgYAAA==

- path: /etc/systemd/system/kubelet.service
  permissions: "0644"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/4yTT08bMRDF7/sprIhDezCG/rkU+QBloRERRWwQhxBFXu8kGcU73trjEFr63atNCJAQpO5pd/x+783a48ENIQ+zU4g2YMPoSV+kEhxw9t1ThW3lyvA0X2DkqFWKQTlvjVMlkpo9SbNsUECYo4Vhdg2RTWBt3L15iFlOcwyeaiA+QwdaAVtVwdgkx898kayFGPMFcsGGU9SHXz5n+QJs0XpdBdDLvNLEqVC+YWV+pwDKemKDBCGurfbjdAdXzyoMQjZCzU1QDsvn5P/RWsL3epFWdHAsBmLvQ+0TsXgUkwCNuOtsJ911xKO4t0K6j0I6EAdiKI4ET4HEKnaJS1kiVW/afFs4EmPs7Or+yaY2M5BxagK8dcs2OaliS0LJpnQQhWRBpvVwGHmnFJttKaUaAto1tJWwNTXW0xgnKcBoeYoH7Zm9AO/MmLjLxNMjJVCbLyOEOYSNFfIVSGdKcFF39v5c3Jzkvbw/uvx5mo96xyd5r/jb2QDm+pOQ8nmQZEjEWIMOUHsGIdcFGeBXgsiy/fCJ9eHXehcogarGI7FOhItvSqmQ6GVQq1ev+9Hb2WYz3qUaZOPSBElWGFbXpd2CQMAQ1UqxEsRX7N76T896x+fFroXr/Lxb9PPr5V7sKN92+z9G/ePuZb/IskGXIhvnhtmtIYbq5EHXyTHKFCHsswkT4H8BAAD//5yxbXI7BAAA



- path: /etc/apt/apt.conf.d/99periodic
  permissions: "0644"
  owner: root
  content: |
    APT::Periodic::Update-Package-Lists "0";
    APT::Periodic::Download-Upgradeable-Packages "0";
    APT::Periodic::AutocleanInterval "0";
    APT::Periodic::Unattended-Upgrade "0";








- path: /etc/containerd/config.toml
  permissions: "0644"
  owner: root
  content: |
    version = 2
    subreaper = false
    oom_score = 0
    [plugins."io.containerd.grpc.v1.cri"]
        sandbox_image = "oss/kubernetes/pause:1.3.1"
        [plugins."io.containerd.grpc.v1.cri".containerd]
            [plugins."io.containerd.grpc.v1.cri".containerd.untrusted_workload_runtime]
                runtime_type = "io.containerd.runtime.v1.linux"
                runtime_engine = "/usr/bin/runc"
            [plugins."io.containerd.grpc.v1.cri".containerd.default_runtime]
                runtime_type = "io.containerd.runtime.v1.linux"
                runtime_engine = "/usr/bin/runc"
    
    [plugins."io.containerd.grpc.v1.cri".cni]
    bin_dir = "/opt/cni/bin"
    conf_dir = "/etc/cni/net.d"
    conf_template = "/etc/containerd/kubenet_template.conf"
    
    [plugins."io.containerd.grpc.v1.cri".registry.headers]
      X-Meta-Source-Client = ["azure/aks"]
    [metrics]
    address = "127.0.0.1:10257"
    #EOF

- path: /etc/containerd/kubenet_template.conf
  permissions: "0644"
  owner: root
  content: |
      {
          "cniVersion": "0.3.1",
          "name": "kubenet",
          "plugins": [{
            "type": "bridge",
            "bridge": "cbr0",
            "mtu": 1500,
            "addIf": "eth0",
            "isGateway": true,
            "ipMasq": true,
            "promisMode": true,
            "hairpinMode": false,
            "ipam": {
                "type": "host-local",
                "subnet": "{{.PodCIDR}}",
                "routes": [{ "dst": "0.0.0.0/0" }]
            }
          }]
      }

- path: /etc/systemd/system/containerd.service
  permissions: "0644"
  owner: root
  content: |
    [Unit]
    Description=containerd daemon
    After=network.target

    [Service]
    ExecStartPre=/sbin/modprobe overlay
    ExecStart=/usr/bin/containerd
    Delegate=yes
    KillMode=process
    OOMScoreAdjust=-999
    LimitNOFILE=1048576
    LimitNPROC=infinity
    LimitCORE=infinity

    [Install]
    WantedBy=multi-user.target

    #EOF

- path: /etc/systemd/system/containerd.service.d/exec_start.conf
  permissions: "0644"
  owner: root
  content: |
    [Service]
    ExecStartPost=/sbin/iptables -P FORWARD ACCEPT
    #EOF

- path: /etc/crictl.yaml
  permissions: "0644"
  owner: root
  content: |
    runtime-endpoint: unix:///run/containerd/containerd.sock
    #EOF

- path: /etc/sysctl.d/11-containerd.conf
  permissions: "0644"
  owner: root
  content: |
    net.ipv4.ip_forward = 1
    net.ipv4.conf.all.forwarding = 1
    net.bridge.bridge-nf-call-iptables = 1
    #EOF




- path: /etc/kubernetes/certs/ca.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    

- path: /etc/kubernetes/certs/client.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    



- path: /var/lib/kubelet/kubeconfig
  permissions: "0644"
  owner: root
  content: |
    apiVersion: v1
    kind: Config
    clusters:
    - name: localcluster
      cluster:
        certificate-authority: /etc/kubernetes/certs/ca.crt
        server: https://:443
    users:
    - name: client
      user:
        client-certificate: /etc/kubernetes/certs/client.crt
        client-key: /etc/kubernetes/certs/client.key
    contexts:
    - context:
        cluster: localcluster
        user: client
      name: localclustercontext
    current-context: localclustercontext
    #EOF

- path: /etc/default/kubelet
  permissions: "0644"
  owner: root
  content: |
    KUBELET_FLAGS=
    KUBELET_REGISTER_SCHEDULABLE=true
    NETWORK_POLICY=

    KUBELET_NODE_LABELS=kubernetes.azure.com/role=agent,agentpool=agent2,storageprofile=managed,storagetier=Premium_LRS,kubernetes.azure.com/cluster=resourceGroupName

    #EOF

- path: /opt/azure/containers/kubelet.sh
  permissions: "0755"
  owner: root
  content: |
    #!/bin/bash

    


    # Disallow container from reaching out to the special IP address 168.63.129.16
    # for TCP protocol (which http uses)
    #
    # 168.63.129.16 contains protected settings that have priviledged info.
    #
    # The host can still reach 168.63.129.16 because it goes through the OUTPUT chain, not FORWARD.
    #
    # Note: we should not block all traffic to 168.63.129.16. For example UDP traffic is still needed
    # for DNS.
    iptables -I FORWARD -d 168.63.129.16 -p tcp --dport 80 -j DROP
    #EOF

- path: /etc/sysctl.d/999-sysctl-aks.conf
  permissions: "0644"
  owner: root
  content: |
    # This is a partial workaround to this upstream Kubernetes issue:
    # https://github.com/kubernetes/kubernetes/issues/41916#issuecomment-312428731
    net.ipv4.tcp_retries2=8
    net.core.message_burst=80
    net.core.message_cost=40
    net.core.somaxconn=16384
    net.ipv4.tcp_max_syn_backlog=16384
    net.ipv4.neigh.default.gc_thresh1=4096
    net.ipv4.neigh.default.gc_thresh2=8192
    net.ipv4.neigh.default.gc_thresh3=16384

    #EOF

runcmd:
- set -x
- . /opt/azure/containers/provision_source.sh
- aptmarkWALinuxAgent hold
