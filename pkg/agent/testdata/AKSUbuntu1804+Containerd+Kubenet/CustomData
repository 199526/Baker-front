[base64(concat('#cloud-config

write_files:
- path: /opt/azure/containers/provision_source.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/6xXbXPaSBL+rl/RUSi/ZCMEOOvElyJXBOSYMwFOEt67y6ZUQtOCKcSMMjPC9ib+71cjgRA2u7a3og8UmpnufvrtUc/LF/aUMnsayrnhuG5w3h84wW8dv3sR+P3Pzmjit0/BkKjAujFoDF/AisHmqbLDPzKBdsSZCilDIe1U8BWVlLN6xJdpggrh63tQc2QG5A9Gcw5mJxEYklsQIQPFQWZRhFIC3lBF2axer5ub4zdUQcOIqWHkkrUjEio8fl07mnOpWLjE49cgVShUlEnFlzISNFUfPuToloYRcwEUKIPakcRv0IST00bj+D0QnhsonJGPORNInokI63J+zxuAmcAUrPNvcPjywhmMHddzRueHz1B4cABTgeEi1xjTLawaBQu/5YAfWM3DUtufq/wQJhLL0zJBTKG5sUA4Q0MiAYuCaVdg28R8OnCj+PcMAeM6pCqIuQhimmDhWPNRecqkCpNE6lj9+PHXnj8RUkXl3wQVcRbT2c/EtNVo5J32y43h+N1eMHYcN+g6rt+uHRUd8H13vX/e73Z8x7uDHxBlCixy+OVQN2hru/A1X2huF17nC7Wjo9r34ajnBP1hz/nP3S/N4+PjitlL57/7rI7d/lXHd/T2z7O6ZpecXr5AbeRBuw217sh1Rl4w8oJh57MDX6t9UDBJdx6yGWUzIBiHWaJgkU0xUglMKYOER6GinBVscjn56HT9QTtPxfpYziwlpa1CYYuM2QKnnCtL4LeMCiQ77ec6H0cj33X+Pem7Tq+tRIZG2W33NuNQb2gTRXozgR2ypGwiUWxcNWvfP40ngQ7InQkv2mBqleaur1GCIZukn8aTnqArFDJXenXRCwajT15eduOOf9GuVNlqTqx1oZdcXHpaeyAKD0NLUGGkkMCMJwQZ0GU4Q0gFbvSaVWzdTVX39TGZb51PBoOgP/T8zmAQ3ItKGbMyDH0vuLro3ZnQBh2C3QhsYU2kTvfVRQ8IlUpwmGYK8ubd4xXjCmKeMWLu4U59PO/Y4cgPzkeTYa9KwvvB5/neFM22UCcfJ0N/UilUzevaq71atIubNFd8XIe1h6nchqdw+lMlBe9BLmiaFkWfIiPIIopyI76u+CdgrGacSV2cGaGqV4gWysqsuhlTdInluqC6e6KE+pwnbTPK302jFByiuuZiMU6yGWXl6mU2xQTVZdF8HUb0v7HgN7dVsC8e6/wcrDvuFq0lMFSoFX0OGY1Rqh4VlY67fCcrb91h39BPoaN0j5RLnzmjigsPxYpGuFldA1+//YtngoVJjnl/hqtZfXIS9LNb7C1CmhE231qNt2dovWmcRNb05NeWFTbPWk3EVuMtInwAW95Ke5pJe7XUv6TgCHu+CjJFEztjU8rIdhxYf/qbJ/T3n27ld2aCjSqyRVTX9JtsWiqmhljmLKt3Q81TqarrvNSJfXaWoqCc0Og5RRumKpihCtJMzBBaDThpQLPVgDANozm2LA1LwkHBlZ1Bv9fx+6Nh4Lhuu2EYnXE/8Bz3ynGD3tALXMd3+47XbjU2CCoHctvtNryqp4KuQoUJZYv6qyqcP1WXT6+u47VrRwKVuI2WJKBxEIc0yQRC7ft+yTs9rAKTCeeLLN09puHcHRue77Vr/9zA9fy8cxq7MVpvuk4ezldm8/Rd/fSk3myd1Zun5it4WIH3IpUz5eU7L6jY7/xv4jo52MFodDkZB+ed/uDh3PkETft0xHTLfpWj3dFwWIb110bVu+dlqnj+THOz0ah+BR5NWVV4nbMIrNUfezIGb96c6HnxCXHJteYRWfN4bXe0uP+xPixGFtiMLK+hWNAfCcYJ6itQE5aUZQoPc7HyygdWBKacZ4rwawaWgCYcmH+DucJULUOx+K0zoCy76cyQKcjYnCcEDh7k9Xmq7UwKO6HTkjbkrVS4JHUS0uR2rf6pGMq7pNnNr4xQ3BkhpozKOZK6Lg2QKFYoIOKMYaS/qBDNMVpAxAn+w4Tabg7/4nKKjOy9mi4XhAqw0v03Az0+KJ5F8yffs41UQpjdxNfXmqq3QuVJK5X1hM/gwDCKEeieC8ZLZ3Ru/D8AAP//CN3fEgwQAAA=

- path: /opt/azure/containers/provision_installs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision_configs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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







- path: /usr/local/bin/configure_azure0.sh
  permissions: "0544"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/6SU0W/bNhDG3/lXfJGFqsVmyR720CQQBsF2N6ONEsTZiiFwDVqiLM4KqZJUPNf2/z5QchS5W7ZhexN0d9/9+N2RvbOg0ipYchEw8Ygl1TkhPUyNpyFFsYVgCdOaqi2MRCJFxleVYqBfKsUG4AI/LythKgzf+oPvSaGXC8UKRjVDn2MPulmj/8678ODtSsWFgfvdwWv+ezt3GLrDSxwDw4OHPVaKleh/5nA+VbW06xCe4R7uDzgLMcD8EiZnggAAS3IJb2rANYQ0TzCzNS9bWC5WR1yvqfmdGwxIxskprvo/uHA+1Q78B9i6zv/XzD2McpaswTOr3GQhEfxYa8VNzhTzfR9CQjCW2tGpSsDkXEMnipfGlgtpSA9RoSVSKTyDDRXmJHeTM1GjVrol6ieCk3ucoZ8hYCYJEsEDwYyfBsNBv07xLUrBtcEcr149wVvyeArD6AMemDBcCotKTdPraIrlZSkyqZDQgif2BGYj1RqlLHiy/YuzkNpYJz7Ju4C7iyd3H69v3y9urj9MR78emtHcw/lzBGEIp+nnYH4ytL93foCl4umKWXxaKEbT7fMtSUkPH9nR3O4geAYtfcJLFFysoXO5eZLr+KUqsSiLasXF6zfYHWlKqYz1cTG6vrqK4nHoDutIQs0/j2OP3z7D8wV9YKAabv2xh58I/gtTmktR/348fu/hN/31/fybEDubftFUfYvnmou24tAtGczt/QhkaWom+8Q0C/QomCEHQjqHiW5/nIXe+7ezxc31eBFHV5PZTTSahCnLaFWYy24kbP2NrNwonnrkxJf4LprGk9vpODw/Pz/vxuLJXTwLA1UJa5HQQStFv9i17qRO39W9mMm/FrmJ7n4Ku8cidpC1Hmiawn29pJrV1rq7tuvhTWeeiMZj0j4U/ZX56qVo9VJWwHlJ0Hle0GG9oJ0G48kHcqLyItUfAQAA//+8Xj4iAgYAAA==

- path: /etc/systemd/system/kubelet.service
  permissions: "0644"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/6SUT2/bOBDF7/oUhJHD7oGSnXiLdAsekq3aDRp0i8hFD0kgUNREIkwNtZyh4+x2v/tC/pPWjoumqE/28P3eGw/Iuf6Ilm+T10Am2J6tR/UuVuCAkz881naofNDc5ktLTCqLFDLnjXZZZTGbb6RJcl1AWFgDt8kVEOvASrt7/UBJjgsbPHaA/MY6UBmwyWq409HxI19EY4AoX1ouWHMkNZmeJPkSTDF4fQigVnmVplZkvudM/xMDZMYja4sQaGuVUnuA6+a1DUL2IlvokDlbPSY/R2vQfqsXacTI3olrcfRL5yOy+CyaAL24Ge0n3YzEZ3FvhHS/CulAjMWteCW4BRTr2BUuZWWxftLm08IrcWdHh7rf2HR6DpJaHeCpW5LsgTSQ9ECGnZD3AoFT2y+mKZu+DMDBAh2r0+9DxgdIyXd6aTyimrw4OZ3+QFSnlyU9YFlpM3e+eS6/Su2ASDdQGk+spuMfpKoYiNXp+LmDQbBNm25ucdqYktsA1E7UdPzyxc95HKvTycvjn/M42Yxu10WubaBiXTkgIVmgHu6Ks8QHpbbfl2LsIFizhfbntbsdjMc728QA5eq1joe3+QX4xi4RN4nYfKQEHPIlQVhA2DlBX4N0ugJHanT077uP5/llPivf//U6Ly/PzvPL4r/RDrBQx0LKx4UhQ0S2HagAnWcQcluQAf6OQCyHHz6ymvzWHQIlYN17i6wi2uXvWZaFiF8WUv3V15S8me82413sQPYuNhZlbcN6LQ4jCAgMlK0VawF9xR5t/+mby7O3xaGDq/ztRTHLr1azOFD+dDH7s5ydXbyfFUlyfYHE2rnb5JNGhvr8QXXRsZWRIKSsQwP8fwAAAP//u1qvbCMGAAA=



- path: /etc/apt/apt.conf.d/99periodic
  permissions: "0644"
  owner: root
  content: |
    APT::Periodic::Update-Package-Lists "0";
    APT::Periodic::Download-Upgradeable-Packages "0";
    APT::Periodic::AutocleanInterval "0";
    APT::Periodic::Unattended-Upgrade "0";








- path: /etc/containerd/config.toml
  permissions: "0644"
  owner: root
  content: |
    version = 2
    subreaper = false
    oom_score = 0
    [plugins."io.containerd.grpc.v1.cri"]
        sandbox_image = "oss/kubernetes/pause:1.3.1"
        [plugins."io.containerd.grpc.v1.cri".containerd]
            [plugins."io.containerd.grpc.v1.cri".containerd.untrusted_workload_runtime]
                runtime_type = "io.containerd.runtime.v1.linux"
                runtime_engine = "/usr/bin/runc"
            [plugins."io.containerd.grpc.v1.cri".containerd.default_runtime]
                runtime_type = "io.containerd.runtime.v1.linux"
                runtime_engine = "/usr/bin/runc"
    
    [plugins."io.containerd.grpc.v1.cri".cni]
    bin_dir = "/opt/cni/bin"
    conf_dir = "/etc/cni/net.d"
    conf_template = "/etc/containerd/kubenet_template.conf"
    
    [plugins."io.containerd.grpc.v1.cri".registry.headers]
      X-Meta-Source-Client = ["azure/aks"]
    [metrics]
    address = "127.0.0.1:10257"
    #EOF

- path: /etc/containerd/kubenet_template.conf
  permissions: "0644"
  owner: root
  content: |
      {
          "cniVersion": "0.3.1",
          "name": "kubenet",
          "plugins": [{
            "type": "bridge",
            "bridge": "cbr0",
            "mtu": 1500,
            "addIf": "eth0",
            "isGateway": true,
            "ipMasq": true,
            "promisMode": true,
            "hairpinMode": false,
            "ipam": {
                "type": "host-local",
                "subnet": "{{.PodCIDR}}",
                "routes": [{ "dst": "0.0.0.0/0" }]
            }
          }]
      }

- path: /etc/systemd/system/containerd.service
  permissions: "0644"
  owner: root
  content: |
    [Unit]
    Description=containerd daemon
    After=network.target

    [Service]
    ExecStartPre=/sbin/modprobe overlay
    ExecStart=/usr/bin/containerd
    Delegate=yes
    KillMode=process
    OOMScoreAdjust=-999
    LimitNOFILE=1048576
    LimitNPROC=infinity
    LimitCORE=infinity

    [Install]
    WantedBy=multi-user.target

    #EOF

- path: /etc/systemd/system/containerd.service.d/exec_start.conf
  permissions: "0644"
  owner: root
  content: |
    [Service]
    ExecStartPost=/sbin/iptables -P FORWARD ACCEPT
    #EOF

- path: /etc/crictl.yaml
  permissions: "0644"
  owner: root
  content: |
    runtime-endpoint: unix:///run/containerd/containerd.sock
    #EOF

- path: /etc/sysctl.d/11-containerd.conf
  permissions: "0644"
  owner: root
  content: |
    net.ipv4.ip_forward = 1
    net.ipv4.conf.all.forwarding = 1
    net.bridge.bridge-nf-call-iptables = 1
    #EOF




- path: /etc/kubernetes/certs/ca.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    

- path: /etc/kubernetes/certs/client.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    



- path: /var/lib/kubelet/kubeconfig
  permissions: "0644"
  owner: root
  content: |
    apiVersion: v1
    kind: Config
    clusters:
    - name: localcluster
      cluster:
        certificate-authority: /etc/kubernetes/certs/ca.crt
        server: https://:443
    users:
    - name: client
      user:
        client-certificate: /etc/kubernetes/certs/client.crt
        client-key: /etc/kubernetes/certs/client.key
    contexts:
    - context:
        cluster: localcluster
        user: client
      name: localclustercontext
    current-context: localclustercontext
    #EOF

- path: /etc/default/kubelet
  permissions: "0644"
  owner: root
  content: |
    KUBELET_FLAGS=
    KUBELET_REGISTER_SCHEDULABLE=true
    NETWORK_POLICY=

    KUBELET_NODE_LABELS=kubernetes.azure.com/role=agent,agentpool=agent2,storageprofile=managed,storagetier=Premium_LRS,kubernetes.azure.com/cluster=',variables('labelResourceGroup'),'

    #EOF

- path: /opt/azure/containers/kubelet.sh
  permissions: "0755"
  owner: root
  content: |
    #!/bin/bash

    


    # Disallow container from reaching out to the special IP address 168.63.129.16
    # for TCP protocol (which http uses)
    #
    # 168.63.129.16 contains protected settings that have priviledged info.
    #
    # The host can still reach 168.63.129.16 because it goes through the OUTPUT chain, not FORWARD.
    #
    # Note: we should not block all traffic to 168.63.129.16. For example UDP traffic is still needed
    # for DNS.
    iptables -I FORWARD -d 168.63.129.16 -p tcp --dport 80 -j DROP
    #EOF

runcmd:
- set -x
- . /opt/azure/containers/provision_source.sh
- aptmarkWALinuxAgent hold
'))]