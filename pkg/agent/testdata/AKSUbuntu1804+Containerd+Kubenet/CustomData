#cloud-config

write_files:
- path: /opt/azure/containers/provision_source.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision_start.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/5SPTUvzQBSF9/kVhzC8baHzjh+7QuuiBqmLRmwKLoQynV6SaMyNMzelfv13qaIVlKJ3ex7uOY9ZlrVZ2lDAcCPGPraejONabFmTD6bxvC5DyfX/UGA0gllbbyrOP8iqDUJe77CKcxyN/h1GydUkW4zT02SoTqLwEITunFTQumbd2Jw8dIUgVtqA23ZJFclvCrQLpLmVppVdVzrPLubZUHWdlT9/eEZBdgVd4/igF53P0ulill1OpmdD1cXN/Ta4jvDttLY+BznE6lM13kNyg1i9D92HkUf8c955SjaljHlFAyhyfaRvDgMobvpIvGe/DfxLB72IXMFQX2Qi2pSC3dTXAAAA//9qyXjA+QEAAA==

- path: /opt/azure/containers/provision.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision_installs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision_configs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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







- path: /usr/local/bin/configure_azure0.sh
  permissions: "0544"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/6SU0W/bNhDG3/lXfJGFqsVmyR720CQQBsF2N6ONEsTZiiFwDVqiLM4KqZJUPNf2/z5QchS5W7ZhexN0d9/9+N2RvbOg0ipYchEw8Ygl1TkhPUyNpyFFsYVgCdOaqi2MRCJFxleVYqBfKsUG4AI/LythKgzf+oPvSaGXC8UKRjVDn2MPulmj/8678ODtSsWFgfvdwWv+ezt3GLrDSxwDw4OHPVaKleh/5nA+VbW06xCe4R7uDzgLMcD8EiZnggAAS3IJb2rANYQ0TzCzNS9bWC5WR1yvqfmdGwxIxskprvo/uHA+1Q78B9i6zv/XzD2McpaswTOr3GQhEfxYa8VNzhTzfR9CQjCW2tGpSsDkXEMnipfGlgtpSA9RoSVSKTyDDRXmJHeTM1GjVrol6ieCk3ucoZ8hYCYJEsEDwYyfBsNBv07xLUrBtcEcr149wVvyeArD6AMemDBcCotKTdPraIrlZSkyqZDQgif2BGYj1RqlLHiy/YuzkNpYJz7Ju4C7iyd3H69v3y9urj9MR78emtHcw/lzBGEIp+nnYH4ytL93foCl4umKWXxaKEbT7fMtSUkPH9nR3O4geAYtfcJLFFysoXO5eZLr+KUqsSiLasXF6zfYHWlKqYz1cTG6vrqK4nHoDutIQs0/j2OP3z7D8wV9YKAabv2xh58I/gtTmktR/348fu/hN/31/fybEDubftFUfYvnmou24tAtGczt/QhkaWom+8Q0C/QomCEHQjqHiW5/nIXe+7ezxc31eBFHV5PZTTSahCnLaFWYy24kbP2NrNwonnrkxJf4LprGk9vpODw/Pz/vxuLJXTwLA1UJa5HQQStFv9i17qRO39W9mMm/FrmJ7n4Ku8cidpC1Hmiawn29pJrV1rq7tuvhTWeeiMZj0j4U/ZX56qVo9VJWwHlJ0Hle0GG9oJ0G48kHcqLyItUfAQAA//+8Xj4iAgYAAA==

- path: /etc/systemd/system/kubelet.service
  permissions: "0644"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/4yTT08bMRDF7/sprIhDezCG/rkU+QBloRERRWwQhxBFXu8kGcU73trjEFr63atNCJAQpO5pd/x+783a48ENIQ+zU4g2YMPoSV+kEhxw9t1ThW3lyvA0X2DkqFWKQTlvjVMlkpo9SbNsUECYo4Vhdg2RTWBt3L15iFlOcwyeaiA+QwdaAVtVwdgkx898kayFGPMFcsGGU9SHXz5n+QJs0XpdBdDLvNLEqVC+YWV+pwDKemKDBCGurfbjdAdXzyoMQjZCzU1QDsvn5P/RWsL3epFWdHAsBmLvQ+0TsXgUkwCNuOtsJ911xKO4t0K6j0I6EAdiKI4ET4HEKnaJS1kiVW/afFs4EmPs7Or+yaY2M5BxagK8dcs2OaliS0LJpnQQhWRBpvVwGHmnFJttKaUaAto1tJWwNTXW0xgnKcBoeYoH7Zm9AO/MmLjLxNMjJVCbLyOEOYSNFfIVSGdKcFF39v5c3Jzkvbw/uvx5mo96xyd5r/jb2QDm+pOQ8nmQZEjEWIMOUHsGIdcFGeBXgsiy/fCJ9eHXehcogarGI7FOhItvSqmQ6GVQq1ev+9Hb2WYz3qUaZOPSBElWGFbXpd2CQMAQ1UqxEsRX7N76T896x+fFroXr/Lxb9PPr5V7sKN92+z9G/ePuZb/IskGXIhvnhtmtIYbq5EHXyTHKFCHsswkT4H8BAAD//5yxbXI7BAAA



- path: /etc/apt/apt.conf.d/99periodic
  permissions: "0644"
  owner: root
  content: |
    APT::Periodic::Update-Package-Lists "0";
    APT::Periodic::Download-Upgradeable-Packages "0";
    APT::Periodic::AutocleanInterval "0";
    APT::Periodic::Unattended-Upgrade "0";








- path: /etc/containerd/config.toml
  permissions: "0644"
  owner: root
  content: |
    version = 2
    subreaper = false
    oom_score = 0
    [plugins."io.containerd.grpc.v1.cri"]
      sandbox_image = "oss/kubernetes/pause:1.3.1"
      [plugins."io.containerd.grpc.v1.cri".containerd]
        
        [plugins."io.containerd.grpc.v1.cri".containerd.untrusted_workload_runtime]
          runtime_type = "io.containerd.runc.v2"
          runtime_engine = "/usr/bin/runc"
        [plugins."io.containerd.grpc.v1.cri".containerd.default_runtime]
          runtime_type = "io.containerd.runc.v2"
          runtime_engine = "/usr/bin/runc"
      
      [plugins."io.containerd.grpc.v1.cri".cni]
        bin_dir = "/opt/cni/bin"
        conf_dir = "/etc/cni/net.d"
        conf_template = "/etc/containerd/kubenet_template.conf"
      
      [plugins."io.containerd.grpc.v1.cri".registry.headers]
        X-Meta-Source-Client = ["azure/aks"]
    [metrics]
      address = "127.0.0.1:10257"
    
    #EOF

- path: /etc/containerd/kubenet_template.conf
  permissions: "0644"
  owner: root
  content: |
      {
          "cniVersion": "0.3.1",
          "name": "kubenet",
          "plugins": [{
            "type": "bridge",
            "bridge": "cbr0",
            "mtu": 1500,
            "addIf": "eth0",
            "isGateway": true,
            "ipMasq": true,
            "promisMode": true,
            "hairpinMode": false,
            "ipam": {
                "type": "host-local",
                "subnet": "{{.PodCIDR}}",
                "routes": [{ "dst": "0.0.0.0/0" }]
            }
          }]
      }

- path: /etc/systemd/system/containerd.service
  permissions: "0644"
  owner: root
  content: |
    [Unit]
    Description=containerd daemon
    After=network.target

    [Service]
    ExecStartPre=/sbin/modprobe overlay
    ExecStart=/usr/bin/containerd
    Delegate=yes
    KillMode=process
    Restart=always
    OOMScoreAdjust=-999
    LimitNOFILE=1048576
    LimitNPROC=infinity
    LimitCORE=infinity

    [Install]
    WantedBy=multi-user.target

    #EOF

- path: /etc/systemd/system/containerd.service.d/exec_start.conf
  permissions: "0644"
  owner: root
  content: |
    [Service]
    ExecStartPost=/sbin/iptables -P FORWARD ACCEPT
    #EOF

- path: /etc/crictl.yaml
  permissions: "0644"
  owner: root
  content: |
    runtime-endpoint: unix:///run/containerd/containerd.sock
    #EOF

- path: /etc/sysctl.d/11-containerd.conf
  permissions: "0644"
  owner: root
  content: |
    net.ipv4.ip_forward = 1
    net.ipv4.conf.all.forwarding = 1
    net.bridge.bridge-nf-call-iptables = 1
    #EOF






- path: /etc/kubernetes/certs/ca.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    

- path: /etc/kubernetes/certs/client.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    



- path: /var/lib/kubelet/kubeconfig
  permissions: "0644"
  owner: root
  content: |
    apiVersion: v1
    kind: Config
    clusters:
    - name: localcluster
      cluster:
        certificate-authority: /etc/kubernetes/certs/ca.crt
        server: https://:443
    users:
    - name: client
      user:
        client-certificate: /etc/kubernetes/certs/client.crt
        client-key: /etc/kubernetes/certs/client.key
    contexts:
    - context:
        cluster: localcluster
        user: client
      name: localclustercontext
    current-context: localclustercontext
    #EOF

- path: /etc/default/kubelet
  permissions: "0644"
  owner: root
  content: |
    KUBELET_FLAGS=
    KUBELET_REGISTER_SCHEDULABLE=true
    NETWORK_POLICY=

    KUBELET_NODE_LABELS=kubernetes.azure.com/role=agent,agentpool=agent2,storageprofile=managed,storagetier=Premium_LRS,kubernetes.azure.com/cluster=resourceGroupName

    #EOF

- path: /opt/azure/containers/kubelet.sh
  permissions: "0755"
  owner: root
  content: |
    #!/bin/bash

    


    # Disallow container from reaching out to the special IP address 168.63.129.16
    # for TCP protocol (which http uses)
    #
    # 168.63.129.16 contains protected settings that have priviledged info.
    #
    # The host can still reach 168.63.129.16 because it goes through the OUTPUT chain, not FORWARD.
    #
    # Note: we should not block all traffic to 168.63.129.16. For example UDP traffic is still needed
    # for DNS.
    iptables -I FORWARD -d 168.63.129.16 -p tcp --dport 80 -j DROP
    #EOF

- path: /etc/sysctl.d/999-sysctl-aks.conf
  permissions: "0644"
  owner: root
  content: |
    # This is a partial workaround to this upstream Kubernetes issue:
    # https://github.com/kubernetes/kubernetes/issues/41916#issuecomment-312428731
    net.ipv4.tcp_retries2=8
    net.core.message_burst=80
    net.core.message_cost=40
    net.core.somaxconn=16384
    net.ipv4.tcp_max_syn_backlog=16384
    net.ipv4.neigh.default.gc_thresh1=4096
    net.ipv4.neigh.default.gc_thresh2=8192
    net.ipv4.neigh.default.gc_thresh3=16384

    #EOF

runcmd:
- set -x
- . /opt/azure/containers/provision_source.sh
- aptmarkWALinuxAgent hold
